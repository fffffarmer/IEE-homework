<!doctype html>
<html lang="zh" data-hairline="true" data-theme="light"><head><meta charSet="utf-8"/><title data-react-helmet="true">D3.js - 知乎</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><meta name="renderer" content="webkit"/><meta name="force-rendering" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"/><title>知乎 - 有问题上知乎</title><meta data-react-helmet="true" name="keywords" content="D3.js"/><meta data-react-helmet="true" name="image" content="https://pic1.zhimg.com/50/fae00cab34e38bad9a23c1ef6c8ab469_qhd.jpg"/><meta data-react-helmet="true" name="description" content="Data-Driven Documents"/><link rel="shortcut icon" type="image/x-icon" href="https://static.zhihu.com/static/favicon.ico"/><link rel="search" type="application/opensearchdescription+xml" href="https://static.zhihu.com/static/search.xml" title="知乎"/><link rel="dns-prefetch" href="//static.zhimg.com"/><link rel="dns-prefetch" href="//pic1.zhimg.com"/><link rel="dns-prefetch" href="//pic2.zhimg.com"/><link rel="dns-prefetch" href="//pic3.zhimg.com"/><link rel="dns-prefetch" href="//pic4.zhimg.com"/><link href="https://static.zhihu.com/heifetz/main.app.ae5f819ea51859c3afe0.css" rel="stylesheet"/></head><body class="Entry-body"><div id="root"><div data-zop-usertoken="{}" data-reactroot=""><div class="LoadingBar"></div><div><header role="banner" class="Sticky AppHeader" data-za-module="TopNavBar"><div class="AppHeader-inner"><a href="//www.zhihu.com" aria-label="知乎"><svg viewBox="0 0 200 91" class="Icon ZhihuLogo ZhihuLogo--blue Icon--logo" style="height:30px;width:64px" width="64" height="30" aria-hidden="true"><title></title><g><path d="M53.29 80.035l7.32.002 2.41 8.24 13.128-8.24h15.477v-67.98H53.29v67.978zm7.79-60.598h22.756v53.22h-8.73l-8.718 5.473-1.587-5.46-3.72-.012v-53.22zM46.818 43.162h-16.35c.545-8.467.687-16.12.687-22.955h15.987s.615-7.05-2.68-6.97H16.807c1.09-4.1 2.46-8.332 4.1-12.708 0 0-7.523 0-10.085 6.74-1.06 2.78-4.128 13.48-9.592 24.41 1.84-.2 7.927-.37 11.512-6.94.66-1.84.785-2.08 1.605-4.54h9.02c0 3.28-.374 20.9-.526 22.95H6.51c-3.67 0-4.863 7.38-4.863 7.38H22.14C20.765 66.11 13.385 79.24 0 89.62c6.403 1.828 12.784-.29 15.937-3.094 0 0 7.182-6.53 11.12-21.64L43.92 85.18s2.473-8.402-.388-12.496c-2.37-2.788-8.768-10.33-11.496-13.064l-4.57 3.627c1.363-4.368 2.183-8.61 2.46-12.71H49.19s-.027-7.38-2.372-7.38zm128.752-.502c6.51-8.013 14.054-18.302 14.054-18.302s-5.827-4.625-8.556-1.27c-1.874 2.548-11.51 15.063-11.51 15.063l6.012 4.51zm-46.903-18.462c-2.814-2.577-8.096.667-8.096.667s12.35 17.2 12.85 17.953l6.08-4.29s-8.02-11.752-10.83-14.33zM199.99 46.5c-6.18 0-40.908.292-40.953.292v-31.56c1.503 0 3.882-.124 7.14-.376 12.773-.753 21.914-1.25 27.427-1.504 0 0 3.817-8.496-.185-10.45-.96-.37-7.24 1.43-7.24 1.43s-51.63 5.153-72.61 5.64c.5 2.756 2.38 5.336 4.93 6.11 4.16 1.087 7.09.53 15.36.277 7.76-.5 13.65-.76 17.66-.76v31.19h-41.71s.88 6.97 7.97 7.14h33.73v22.16c0 4.364-3.498 6.87-7.65 6.6-4.4.034-8.15-.36-13.027-.566.623 1.24 1.977 4.496 6.035 6.824 3.087 1.502 5.054 2.053 8.13 2.053 9.237 0 14.27-5.4 14.027-14.16V53.93h38.235c3.026 0 2.72-7.432 2.72-7.432z" fill-rule="evenodd"/></g></svg></a><nav role="navigation" class="AppHeader-nav"><a class="AppHeader-navItem" href="//www.zhihu.com/" data-za-not-track-link="true">首页</a><a class="AppHeader-navItem" href="//www.zhihu.com/explore" data-za-not-track-link="true">发现</a><a href="//www.zhihu.com/topic" class="AppHeader-navItem is-active" data-za-not-track-link="true">话题</a></nav><div class="SearchBar" role="search" data-za-module="PresetWordItem"><div class="SearchBar-toolWrapper"><form class="SearchBar-tool"><div><div class="Popover"><div class="SearchBar-input Input-wrapper Input-wrapper--grey"><input type="text" maxLength="100" value="" autoComplete="off" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-activedescendant="null--1" id="null-toggle" aria-haspopup="true" aria-owns="null-content" class="Input" placeholder=""/><div class="Input-after"><button aria-label="搜索" type="button" class="Button SearchBar-searchIcon Button--primary"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Search" fill="currentColor" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"></path></svg></span></button></div></div></div></div></form></div></div><div class="AppHeader-userInfo"><div class="AppHeader-profile"><div><button type="button" class="Button AppHeader-login Button--blue">登录</button><button type="button" class="Button Button--primary Button--blue">加入知乎</button></div></div></div></div></header></div><main role="main" class="App-main"><div class="ContentLayout"><div class="ContentLayout-mainColumn"><div class="Card"><div itemType="http://schema.org/Thing" itemscope=""><meta itemProp="description" content="Data-Driven Documents"/><meta itemProp="url" content="https://www.zhihu.com/topic/20034667"/><meta itemProp="name" content="D3.js"/><meta itemProp="image" content="https://pic1.zhimg.com/50/fae00cab34e38bad9a23c1ef6c8ab469_qhd.jpg"/><meta itemProp="zhihu:bestAnswersCount" content="29"/><meta itemProp="zhihu:unansweredCount" content="57"/><meta itemProp="zhihu:questionsCount" content="57"/><div class="TopicCard"><div class="ContentItem TopicCard-content"><div class="ContentItem-main"><div class="ContentItem-image"><img class="ImageAlias TopicCard-image" alt="D3.js" src="https://pic1.zhimg.com/50/fae00cab34e38bad9a23c1ef6c8ab469_qhd.jpg"/></div><div class="ContentItem-head"><h2 class="ContentItem-title"><div class="TopicCard-title"><h1 class="TopicCard-titleText">D3.js</h1></div></h2><div class="ContentItem-meta"><div class="TopicCard-description"><span class="RichText ztext">Data-Driven Documents</span></div></div></div></div></div><div class="TopicCard-actions"><div class="TopicActions"><button type="button" class="Button FollowButton TopicActions-followButton Button--primary Button--blue">关注话题</button><a type="button" class="Button TopicActions-link Button--plain Button--withIcon Button--withLabel" href="/topic/20034667/organize"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Settings Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M20.868 17.185a.896.896 0 0 1-.452.137c-.123 0-1.397-.26-1.617-.233-1.354.014-1.78 1.276-1.835 1.742-.055.453 0 .892.191 1.303a.8.8 0 0 1-.068.851C16.224 21.877 14.922 22 14.73 22a.548.548 0 0 1-.356-.151c-.11-.096-.685-1.138-1.069-1.468-1.304-.955-2.247-.329-2.63 0-.398.33-.672.7-.836 1.125a.632.632 0 0 1-.329.37c-1.354.426-2.918-.919-3.014-1.056a.564.564 0 0 1-.123-.356c-.014-.138.383-1.276.342-1.688-.342-1.9-1.836-1.687-2.096-1.673a3.192 3.192 0 0 0-.918.178.873.873 0 0 1-.59-.055c-.887-.462-1.136-2.332-1.109-2.51.055-.315.192-.521.438-.604.425-.164.809-.452 1.151-.85.931-1.262.343-2.25 0-2.634-.342-.356-.726-.645-1.15-.809-.138-.041-.234-.151-.33-.316-.38-1.434.613-2.552.867-2.77.255-.22.6-.055.723 0 .425.164.877.219 1.343.15C6.7 6.636 6.784 5.141 6.81 4.908c.014-.247-.11-1.29-.137-1.4a.488.488 0 0 1 .027-.315C7.317 2.178 9.071 2 9.222 2a.56.56 0 0 1 .439.178c.11.124.63 1.111 1 1.4.4.338 1.583.83 2.59.013.397-.274.959-1.29 1.082-1.413A.55.55 0 0 1 14.717 2c1.56 0 2.329 1.029 2.438 1.22a.458.458 0 0 1 .069.371c-.028.151-.329 1.152-.26 1.605.365 1.537 1.383 1.742 1.89 1.783.493.028 1.644-.356 1.809-.343a.63.63 0 0 1 .424.206c.535.31.85 1.715.905 2.14.027.233-.014.439-.11.562-.11.138-1.165.714-1.48 1.112-.855.982-.342 2.25-.068 2.606.26.37 1.22.905 1.288.96.15.137.26.302.315.494.146 1.413-.89 2.387-1.069 2.47zm-8.905-.535c.644 0 1.246-.123 1.822-.356a4.576 4.576 0 0 0 1.493-1.016 4.694 4.694 0 0 0 1-1.495c.247-.562.357-1.18.357-1.81 0-.659-.11-1.262-.356-1.825a4.79 4.79 0 0 0-1-1.481 4.542 4.542 0 0 0-1.494-1.002 4.796 4.796 0 0 0-3.631 0 4.627 4.627 0 0 0-1.48 1.002c-.424.425-.767.919-1 1.481a4.479 4.479 0 0 0-.37 1.825c0 .644.124 1.248.37 1.81a4.62 4.62 0 0 0 1 1.495c.425.426.918.768 1.48 1.016a4.677 4.677 0 0 0 1.809.356z" fill-rule="evenodd"></path></svg></span>管理</a><a type="button" class="Button TopicActions-link Button--plain Button--withIcon Button--withLabel" href="/topic/20034667/log"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--List Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M8.493 10h12.014c.83 0 1.493.672 1.493 1.5 0 .834-.668 1.5-1.493 1.5H8.493C7.663 13 7 12.328 7 11.5c0-.834.668-1.5 1.493-1.5zm0 6h12.014c.83 0 1.493.672 1.493 1.5 0 .834-.668 1.5-1.493 1.5H8.493C7.663 19 7 18.328 7 17.5c0-.834.668-1.5 1.493-1.5zM3.5 4C4.334 4 5 4.672 5 5.5 5 6.334 4.328 7 3.5 7 2.666 7 2 6.328 2 5.5 2 4.666 2.672 4 3.5 4zm0 6c.834 0 1.5.672 1.5 1.5 0 .834-.672 1.5-1.5 1.5-.834 0-1.5-.672-1.5-1.5 0-.834.672-1.5 1.5-1.5zm0 6c.834 0 1.5.672 1.5 1.5 0 .834-.672 1.5-1.5 1.5-.834 0-1.5-.672-1.5-1.5 0-.834.672-1.5 1.5-1.5zM8.493 4h12.014C21.337 4 22 4.672 22 5.5c0 .834-.668 1.5-1.493 1.5H8.493C7.663 7 7 6.328 7 5.5 7 4.666 7.668 4 8.493 4z" fill-rule="evenodd"></path></svg></span>日志</a><div class="Popover ShareMenu TopicActions-shareMenu"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div></div></div></div></div></div><div id="TopicMain"><div class="Topic-bar Topic-bar--borderBottom"><ul role="tablist" class="Tabs Topic-tabs"><li role="tab" class="Tabs-item Tabs-item--noMeta" aria-controls="Topic-hot"><a class="Tabs-link" href="/topic/20034667/hot">讨论</a></li><li role="tab" class="Tabs-item Tabs-item--noMeta" aria-controls="Topic-top"><a class="Tabs-link" href="/topic/20034667/top-answers">精华</a></li><li role="tab" class="Tabs-item Tabs-item--noMeta" aria-controls="Topic-wait"><a class="Tabs-link" href="/topic/20034667/unanswered">等待回答</a></li></ul></div><div><div class="Card"><div class="List"><div class=""><div class="List-item TopicFeedItem"><div class="ContentItem ArticleItem" data-zop="{&quot;authorName&quot;:&quot;ssthouse&quot;,&quot;itemId&quot;:47013777,&quot;title&quot;:&quot;Github Repository 可视化 (D3.js &amp; Three.js)&quot;,&quot;type&quot;:&quot;article&quot;}" itemProp="article" itemType="http://schema.org/SocialMediaPosting" itemscope=""><h2 class="ContentItem-title"><a href="//zhuanlan.zhihu.com/p/47013777" target="_blank" data-za-detail-view-element_name="Title">Github Repository 可视化 (D3.js &amp; Three.js)</a></h2><div class="ContentItem-meta"><div class="AuthorInfo ArticleItem-authorInfo AuthorInfo--plain" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="ssthouse"/><meta itemProp="image" content="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg"/><meta itemProp="url" content="https://www.zhihu.com/people/shenshuntain"/><meta itemProp="zhihu:followerCount"/><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain"><img class="Avatar AuthorInfo-avatar" width="24" height="24" src="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_s.jpg" srcSet="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_xs.jpg 2x" alt="ssthouse"/></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain">ssthouse</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="RichText ztext AuthorInfo-badgeText">maybe a software developer</div></div></div></div></div></div><meta itemProp="headline" content="Github Repository 可视化 (D3.js &amp; Three.js)"/><meta itemProp="url" content="https:////zhuanlan.zhihu.com/p/47013777"/><meta itemProp="datePublished" content="2018-10-17T11:14:35.000Z"/><meta itemProp="dateModified" content="2018-10-17T11:14:35.000Z"/><meta itemProp="commentCount" content="0"/><meta itemProp="image" content="https://pic1.zhimg.com/50/v2-a35a7ec371969f92588d5cde75a9a2ff_hd.jpg"/><div class="RichContent is-collapsed"><div class="RichContent-cover"><div class="RichContent-cover-inner"><div class="VagueImage" data-src="https://pic1.zhimg.com/50/v2-a35a7ec371969f92588d5cde75a9a2ff_400x224.jpg"><div class="VagueImage-mask is-active"></div></div></div></div><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="articleBody">Github Repository 可视化 (D3.js &amp; Three.js)先上 Demo 链接 &amp; 效果图 <a href="https://ssthouse.github.io/github-visualization/">demo 链接</a> <a href="https://github.com/ssthouse/github-visualization">github 链接</a>效果图 2D: 效果图 3D: 为什么要做这样一个网站?最初想法是因为 github 提供的页面无法一次看到用户的所有 repository, 也无法直观的看到每个 repository 的量级…</span><button type="button" class="Button ContentItem-more Button--plain">阅读全文<span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div><div class="ContentItem-actions"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 <!-- -->7</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button></div></div></div></div><div class="List-item TopicFeedItem"><div class="ContentItem ArticleItem" data-zop="{&quot;authorName&quot;:&quot;知乎用户&quot;,&quot;itemId&quot;:46241352,&quot;title&quot;:&quot;D3.js - 数据绑定 &amp; 动画初步 1&quot;,&quot;type&quot;:&quot;article&quot;}" itemProp="article" itemType="http://schema.org/SocialMediaPosting" itemscope=""><h2 class="ContentItem-title"><a href="//zhuanlan.zhihu.com/p/46241352" target="_blank" data-za-detail-view-element_name="Title">D3.js - 数据绑定 &amp; 动画初步 1</a></h2><div class="ContentItem-meta"><div class="AuthorInfo ArticleItem-authorInfo AuthorInfo--plain" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="知乎用户"/><meta itemProp="image" content="https://pic4.zhimg.com/50/da8e974dc_is.jpg"/><meta itemProp="url" content="https://www.zhihu.com/people/"/><meta itemProp="zhihu:followerCount"/><span class="UserLink AuthorInfo-avatarWrapper"><img class="Avatar AuthorInfo-avatar" width="24" height="24" src="https://pic4.zhimg.com/50/da8e974dc_s.jpg" srcSet="https://pic4.zhimg.com/50/da8e974dc_xs.jpg 2x" alt="知乎用户"/></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name">知乎用户</span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="AuthorInfo-badgeText">注册会计师(CPA)持证人</div></div></div></div></div></div><meta itemProp="headline" content="D3.js - 数据绑定 &amp; 动画初步 1"/><meta itemProp="url" content="https:////zhuanlan.zhihu.com/p/46241352"/><meta itemProp="datePublished" content="2018-10-08T20:38:50.000Z"/><meta itemProp="dateModified" content="2018-10-08T20:38:50.000Z"/><meta itemProp="commentCount" content="2"/><meta itemProp="image"/><div class="RichContent is-collapsed"><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="articleBody">实例: 实现如下 类似电表的动态效果。 上代码。 &lt;svg width="600" height="600"&gt;&lt;/svg&gt;

&lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;
&lt;script&gt;

 let data = "0000000".split("").map(_=&gt;Number.parseInt(_));
 let flag = true;
 const dur = …</span><button type="button" class="Button ContentItem-more Button--plain">阅读全文<span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div><div class="ContentItem-actions"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 <!-- -->8</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>2 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button></div></div></div></div><div class="List-item TopicFeedItem"><div class="ContentItem ArticleItem" data-zop="{&quot;authorName&quot;:&quot;ssthouse&quot;,&quot;itemId&quot;:38846198,&quot;title&quot;:&quot;[译] D3.js 之 d3-shap 简介&quot;,&quot;type&quot;:&quot;article&quot;}" itemProp="article" itemType="http://schema.org/SocialMediaPosting" itemscope=""><h2 class="ContentItem-title"><a href="//zhuanlan.zhihu.com/p/38846198" target="_blank" data-za-detail-view-element_name="Title">[译] D3.js 之 d3-shap 简介</a></h2><div class="ContentItem-meta"><div class="AuthorInfo ArticleItem-authorInfo AuthorInfo--plain" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="ssthouse"/><meta itemProp="image" content="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg"/><meta itemProp="url" content="https://www.zhihu.com/people/shenshuntain"/><meta itemProp="zhihu:followerCount"/><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain"><img class="Avatar AuthorInfo-avatar" width="24" height="24" src="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_s.jpg" srcSet="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_xs.jpg 2x" alt="ssthouse"/></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain">ssthouse</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="RichText ztext AuthorInfo-badgeText">maybe a software developer</div></div></div></div></div></div><meta itemProp="headline" content="[译] D3.js 之 d3-shap 简介"/><meta itemProp="url" content="https:////zhuanlan.zhihu.com/p/38846198"/><meta itemProp="datePublished" content="2018-07-02T09:59:59.000Z"/><meta itemProp="dateModified" content="2018-07-02T09:59:59.000Z"/><meta itemProp="commentCount" content="0"/><meta itemProp="image" content="https://pic2.zhimg.com/50/v2-0644dc9146cc677d971c7322bc3f1a7d_hd.jpg"/><div class="RichContent is-collapsed"><div class="RichContent-cover"><div class="RichContent-cover-inner"><div class="VagueImage" data-src="https://pic2.zhimg.com/50/v2-0644dc9146cc677d971c7322bc3f1a7d_400x224.jpg"><div class="VagueImage-mask is-active"></div></div></div></div><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="articleBody">译者注 原文: 来自 D3.js 作者 Mike Bostock 的 <a href="https://medium.com/@mbostock/introducing-d3-shape-73f8367e6d12">Introducing d3-shape</a> 译者: <a href="https://github.com/ssthouse">ssthouse</a> 联系译者: 邮箱(ssthouse@163.com) &amp; 微信(wssst123456789) 译文 假设你现在想创建一个用于学习特定数据集的工具, 你最容易想到的呈现方式是什么呢? 一个可以自定义的 c…</span><button type="button" class="Button ContentItem-more Button--plain">阅读全文<span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div><div class="ContentItem-actions"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 <!-- -->5</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button></div></div></div></div><div class="List-item TopicFeedItem"><div class="ContentItem ArticleItem" data-zop="{&quot;authorName&quot;:&quot;ssthouse&quot;,&quot;itemId&quot;:38528158,&quot;title&quot;:&quot;[译] D3.js 嵌套选择集 (Nested Selection)&quot;,&quot;type&quot;:&quot;article&quot;}" itemProp="article" itemType="http://schema.org/SocialMediaPosting" itemscope=""><h2 class="ContentItem-title"><a href="//zhuanlan.zhihu.com/p/38528158" target="_blank" data-za-detail-view-element_name="Title">[译] D3.js 嵌套选择集 (Nested Selection)</a></h2><div class="ContentItem-meta"><div class="AuthorInfo ArticleItem-authorInfo AuthorInfo--plain" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="ssthouse"/><meta itemProp="image" content="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg"/><meta itemProp="url" content="https://www.zhihu.com/people/shenshuntain"/><meta itemProp="zhihu:followerCount"/><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain"><img class="Avatar AuthorInfo-avatar" width="24" height="24" src="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_s.jpg" srcSet="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_xs.jpg 2x" alt="ssthouse"/></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain">ssthouse</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="RichText ztext AuthorInfo-badgeText">maybe a software developer</div></div></div></div></div></div><meta itemProp="headline" content="[译] D3.js 嵌套选择集 (Nested Selection)"/><meta itemProp="url" content="https:////zhuanlan.zhihu.com/p/38528158"/><meta itemProp="datePublished" content="2018-06-26T10:52:26.000Z"/><meta itemProp="dateModified" content="2018-06-26T10:52:26.000Z"/><meta itemProp="commentCount" content="0"/><meta itemProp="image" content="https://pic4.zhimg.com/50/v2-2ac89722aeebc4977c77dc24af7d10b2_hd.jpg"/><div class="RichContent is-collapsed"><div class="RichContent-cover"><div class="RichContent-cover-inner"><div class="VagueImage" data-src="https://pic4.zhimg.com/50/v2-2ac89722aeebc4977c77dc24af7d10b2_400x224.jpg"><div class="VagueImage-mask is-active"></div></div></div></div><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="articleBody">[译] D3.js 嵌套选择集 (Nested Selection) 译者注: 原文: Mike Bostock (D3.js 作者) -- <a href="https://bost.ocks.org/mike/nest/">Nested Selections</a> 译者: <a href="https://github.com/ssthouse">ssthouse</a> 本文讲解的是关于 D3.js 中 d3-selection 的使用. d3-selection 是 d3 的核心所在, 它提供了一种和以往 <i>Dom 操作</i> 和 <i>数据操作</i> 完…</span><button type="button" class="Button ContentItem-more Button--plain">阅读全文<span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div><div class="ContentItem-actions"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 <!-- -->3</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>添加评论</button><div class="Popover ShareMenu ContentItem-action"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button></div></div></div></div><div class="List-item TopicFeedItem"><div class="ContentItem ArticleItem" data-zop="{&quot;authorName&quot;:&quot;ssthouse&quot;,&quot;itemId&quot;:38001672,&quot;title&quot;:&quot;D3.js 学习之路&quot;,&quot;type&quot;:&quot;article&quot;}" itemProp="article" itemType="http://schema.org/SocialMediaPosting" itemscope=""><h2 class="ContentItem-title"><a href="//zhuanlan.zhihu.com/p/38001672" target="_blank" data-za-detail-view-element_name="Title">D3.js 学习之路</a></h2><div class="ContentItem-meta"><div class="AuthorInfo ArticleItem-authorInfo AuthorInfo--plain" itemProp="author" itemscope="" itemType="http://schema.org/Person"><meta itemProp="name" content="ssthouse"/><meta itemProp="image" content="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg"/><meta itemProp="url" content="https://www.zhihu.com/people/shenshuntain"/><meta itemProp="zhihu:followerCount"/><span class="UserLink AuthorInfo-avatarWrapper"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain"><img class="Avatar AuthorInfo-avatar" width="24" height="24" src="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_s.jpg" srcSet="https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_xs.jpg 2x" alt="ssthouse"/></a></div></div></span><div class="AuthorInfo-content"><div class="AuthorInfo-head"><span class="UserLink AuthorInfo-name"><div class="Popover"><div id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><a class="UserLink-link" data-za-detail-view-element_name="User" target="_blank" href="//www.zhihu.com/people/shenshuntain">ssthouse</a></div></div></span></div><div class="AuthorInfo-detail"><div class="AuthorInfo-badge"><div class="RichText ztext AuthorInfo-badgeText">maybe a software developer</div></div></div></div></div></div><meta itemProp="headline" content="D3.js 学习之路"/><meta itemProp="url" content="https:////zhuanlan.zhihu.com/p/38001672"/><meta itemProp="datePublished" content="2018-06-12T09:26:12.000Z"/><meta itemProp="dateModified" content="2018-06-16T02:46:35.000Z"/><meta itemProp="commentCount" content="3"/><meta itemProp="image" content="https://pic4.zhimg.com/50/v2-5b8fa62cbde385bd35fe508ed27ddb0a_hd.jpg"/><div class="RichContent is-collapsed"><div class="RichContent-cover"><div class="RichContent-cover-inner"><div class="VagueImage" data-src="https://pic4.zhimg.com/50/v2-5b8fa62cbde385bd35fe508ed27ddb0a_400x224.jpg"><div class="VagueImage-mask is-active"></div></div></div></div><div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemProp="articleBody"><b>D3</b>.js 简介 原文: <a href="https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a">https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a</a> 译文源代码地址: <a href="https://github.com/ssthouse/d3-blog/blob/master/d3-guide/d3_roadmap_cn.md">https://github.com/ssthouse/d3-blog/blob/master/d3-guide/d3_roadmap_cn.md</a> 如果这篇文章对你有帮助的话, 不妨点个赞 :tada: github 地址: <a href="https://github.com/ssthouse/d3-blog">https://github.com/ssthouse/d3-blog</a> 学习D3.js的旅途中看到的风景十分美妙, 壮丽 有时甚至有些崎岖. 你可能会被d3.js文档长长…</span><button type="button" class="Button ContentItem-more Button--plain">阅读全文<span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--ArrowDown ContentItem-arrowIcon" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z" fill-rule="evenodd"></path></svg></span></button></div><div class="ContentItem-actions"><span><button aria-label="赞同" type="button" class="Button VoteButton VoteButton--up"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleUp VoteButton-TriangleUp" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z" fill-rule="evenodd"></path></svg></span>赞同 <!-- -->32</button><button aria-label="反对" type="button" class="Button VoteButton VoteButton--down"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--TriangleDown" fill="currentColor" viewBox="0 0 24 24" width="10" height="10"><path d="M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z" fill-rule="evenodd"></path></svg></span></button></span><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Comment Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z" fill-rule="evenodd"></path></svg></span>3 条评论</button><div class="Popover ShareMenu ContentItem-action"><div class="" id="null-toggle" aria-haspopup="true" aria-expanded="false" aria-owns="null-content"><button type="button" class="Button Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Share Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z" fill-rule="evenodd"></path></svg></span>分享</button></div></div><button type="button" class="Button ContentItem-action Button--plain Button--withIcon Button--withLabel"><span style="display:inline-flex;align-items:center">​<svg class="Zi Zi--Star Button-zi" fill="currentColor" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path d="M5.515 19.64l.918-5.355-3.89-3.792c-.926-.902-.639-1.784.64-1.97L8.56 7.74l2.404-4.871c.572-1.16 1.5-1.16 2.072 0L15.44 7.74l5.377.782c1.28.186 1.566 1.068.64 1.97l-3.89 3.793.918 5.354c.219 1.274-.532 1.82-1.676 1.218L12 18.33l-4.808 2.528c-1.145.602-1.896.056-1.677-1.218z" fill-rule="evenodd"></path></svg></span>收藏</button></div></div></div></div><div></div></div></div></div></div></div></div><div class="ContentLayout-sideColumn"><div class="TopstorySideBar"><div><div class="Sticky"><div class="Card"><div class="NumberBoard NumberBoard--divider"><button type="button" class="Button NumberBoard-item TopicNumberBoard-item"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">关注者</div><strong class="NumberBoard-itemValue" title="1562">1,562</strong></div></button><a class="NumberBoard-item TopicNumberBoard-item" href="/topic/20034667/questions"><div class="NumberBoard-itemInner"><div class="NumberBoard-itemName">问题数</div><strong class="NumberBoard-itemValue" title="57">57</strong></div></a></div></div><footer class="Footer"><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="//liukanshan.zhihu.com/">刘看山</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/question/19581624">知乎指南</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/terms">知乎协议</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="/terms/privacy">隐私政策</a><br/><a class="Footer-item" target="_blank" href="/app">应用</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://app.mokahr.com/apply/zhihu">工作</a><span class="Footer-dot"></span><button type="button" class="Button OrgCreateButton">申请开通知乎机构号</button><br/><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://zhuanlan.zhihu.com/p/28561671">侵权举报</a><span class="Footer-dot"></span><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="http://www.12377.cn">网上有害信息举报专区</a><br/><span class="Footer-item">违法和不良信息举报：010-82716601</span><br/><a class="Footer-item" target="_blank" href="/jubao">儿童色情信息举报专区</a><br/><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-ICP.png">电信与服务业务经营许可证</a><br/><a class="Footer-item" target="_blank" rel="noopener noreferrer" href="https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-1.jpeg">网络文化经营许可证</a><br/><a class="Footer-item" target="_blank" href="/contact">联系我们</a><span> © 2018 知乎</span></footer></div></div></div></div></div></main></div></div><div id="data" style="display:none" data-state="{&quot;common&quot;:{&quot;ask&quot;:{}},&quot;privacy&quot;:{&quot;showPrivacy&quot;:false},&quot;loading&quot;:{&quot;global&quot;:{&quot;count&quot;:0},&quot;local&quot;:{&quot;topic/get/20034667&quot;:false,&quot;topic/getHot/20034667&quot;:false}},&quot;entities&quot;:{&quot;users&quot;:{},&quot;questions&quot;:{},&quot;answers&quot;:{},&quot;articles&quot;:{&quot;38001672&quot;:{&quot;updated&quot;:1529117195,&quot;author&quot;:{&quot;avatarUrlTemplate&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_{size}.jpg&quot;,&quot;badge&quot;:[],&quot;name&quot;:&quot;ssthouse&quot;,&quot;eduMemberTag&quot;:{&quot;type&quot;:&quot;subject&quot;,&quot;memberTag&quot;:&quot;自动化&quot;},&quot;headline&quot;:&quot;maybe a software developer&quot;,&quot;gender&quot;:1,&quot;userType&quot;:&quot;people&quot;,&quot;isAdvertiser&quot;:false,&quot;avatarUrl&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg&quot;,&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/people/7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;type&quot;:&quot;people&quot;,&quot;urlToken&quot;:&quot;shenshuntain&quot;,&quot;id&quot;:&quot;7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;isOrg&quot;:false},&quot;created&quot;:1528795572,&quot;url&quot;:&quot;http://zhuanlan.zhihu.com/p/38001672&quot;,&quot;title&quot;:&quot;D3.js 学习之路&quot;,&quot;excerpt&quot;:&quot;&lt;b&gt;D3&lt;/b&gt;.js 简介 原文: &lt;a href=\&quot;https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\&quot;&gt;https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a&lt;/a&gt; 译文源代码地址: &lt;a href=\&quot;https://github.com/ssthouse/d3-blog/blob/master/d3-guide/d3_roadmap_cn.md\&quot;&gt;https://github.com/ssthouse/d3-blog/blob/master/d3-guide/d3_roadmap_cn.md&lt;/a&gt; 如果这篇文章对你有帮助的话, 不妨点个赞 :tada: github 地址: &lt;a href=\&quot;https://github.com/ssthouse/d3-blog\&quot;&gt;https://github.com/ssthouse/d3-blog&lt;/a&gt; 学习D3.js的旅途中看到的风景十分美妙, 壮丽 有时甚至有些崎岖. 你可能会被d3.js文档长长…&quot;,&quot;content&quot;:&quot;&lt;h2&gt;&lt;b&gt;D3&lt;/b&gt;.js 简介&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;原文: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;https://&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;medium.com/@enjalot/the&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;-hitchhikers-guide-to-d3-js-a8552174733a&lt;/span&gt;&lt;span class=\&quot;ellipsis\&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;译文源代码地址: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse/d3-blog/blob/master/d3-guide/d3_roadmap_cn.md\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;https://&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;github.com/ssthouse/d3-&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;blog/blob/master/d3-guide/d3_roadmap_cn.md&lt;/span&gt;&lt;span class=\&quot;ellipsis\&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如果这篇文章对你有帮助的话, 不妨点个赞 :tada: &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;github 地址:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse/d3-blog\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;https://&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;github.com/ssthouse/d3-&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;blog&lt;/span&gt;&lt;span class=\&quot;ellipsis\&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;学习D3.js的旅途中看到的风景十分美妙, 壮丽 有时甚至有些崎岖. 你可能会被d3.js文档长长的function列表所吓到(&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3/blob/master/API.md\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3’s API documentation&lt;/a&gt; ), 或者被成堆的教程弄的疲惫不堪( &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3/wiki/Tutorials\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;dozens of tutorials&lt;/a&gt;). 这里有超过两万个例子你可以用来学习: &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/search\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;20,000+ d3 examples&lt;/a&gt; , 但你不知道哪些是真正对你学习D3.js有帮助的.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-0eb4e0b0a1548a3912c535321f1755b7_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;2407\&quot; data-rawheight=\&quot;2130\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;2407\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-0eb4e0b0a1548a3912c535321f1755b7_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如果你只是想要快速得到一个柱状图或者图表, 那么这篇文章可能不太适合你. 这里有很多库可以帮你做到这一点: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/wbkd/awesome-d3%23charts\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;plenty of charting libraries&lt;/a&gt; . 如果你更倾向于看书学习, 这本书也许是你不错的起点 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//shop.oreilly.com/product/0636920026938.do\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Interactive Data Visualization for the Web&lt;/a&gt;. &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/Elijah_Meeks\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Elijah Meeks&lt;/a&gt;  的 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.manning.com/books/d3-js-in-action\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;D3.js in Action&lt;/a&gt;  可以帮助你更好的了解D3的API.&lt;/p&gt;&lt;p&gt;这篇文章目的是让你在思想上做好学习D3的准备, 并且提供一些接下来学习的方向. 除了对于D3本身API的学习, 关于web标准的HTML, SVG, CSS, Javascript 和 数据可视化的概念,标准都是需要学习的. 很有可能你已经知道上面这些中的一部分, 这篇文章旨在为你继续学习提供一个好的起点.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-3f6aa045af60ac03760318529ff015ba_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1838\&quot; data-rawheight=\&quot;812\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1838\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-3f6aa045af60ac03760318529ff015ba_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.r2d3.us/visual-intro-to-machine-learning-part-1/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;r2d3.us visual introduction to machine learning&lt;/a&gt; 设置了一个很高的起点&lt;/i&gt;&lt;/p&gt;&lt;p&gt;在我们进入数据可视化和代码技巧的学习之前, 先让我们看看一些能让我们激发学习兴趣的东西. 这里有很多让人惊叹的例子, 不妨点进去看一看, 并给自己设定一个学习目标:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.google.com/search%3Fq%3Dnew%2Byork%2Btimes%2Bd3%2Binteractives%26oq%3Dnew%2Byork%2Btimes%2Bd3%2Binteractives%26aqs%3Dchrome..69i57j69i64.6825j0j1%26sourceid%3Dchrome%26ie%3DUTF-8\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;New York Times article&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.r2d3.us/visual-intro-to-machine-learning-part-1/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;r2d3&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//distill.pub/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;distill.pub&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.datasketch.es/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;datasketch|es&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//pudding.cool/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;polygraph&lt;/a&gt;,  &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//ncase.me/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;ncase&lt;/a&gt;. &lt;/p&gt;&lt;p&gt;不要只是看看就好, 你可以给自己设定一个大一点的目标. 我从这篇文章中学习到, 最好的学习方式就是给自己设定一个想要完成的任务, 并且绞尽脑汁的去完成它:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40enjalot/how-do-you-learn-d3-js-ccffc151419b\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;interviewing some of the top data visualization practitioners using d3.js&lt;/a&gt; .&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;图形化的展现形式&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;D3 并没有引入一种新的视觉展现形式. 不同于 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//processing.org/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Processing&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//raphaeljs.com/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Raphaël&lt;/a&gt;, 或者 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//vis.stanford.edu/protovis/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Protovis&lt;/a&gt;, D3 图形方面的词汇都是直接来自于 web标准: : HTML, SVG, and CSS&lt;br&gt;— &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//d3js.org\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;http://&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;d3js.org&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-0f4a1268171a38fc4b058822dee8ccec_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;921\&quot; data-rawheight=\&quot;293\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;921\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-0f4a1268171a38fc4b058822dee8ccec_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;学习D3来写图表就像是学习法语来写营养标签. 公平的来说 , &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/syntagmatic\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;@syntagmatic&lt;/a&gt; 确实做出了非常不错的 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//bl.ocks.org/syntagmatic/2420080\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;营养标签&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;图表仅仅是内部有一些形状的矩形. 而D3提供的是一种让你通过操作图标或者你自己定义的图形来表达你想要展示数据的方式.  它让你可以轻易地为你的图形添加可视化交互, 定义你的图形有怎样的行为. 你在D3中学到的将是一种可视化的表达方式, 这是你在其他library中所得不到的.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;如果你想要了解人们所用的不同种类的标记和图形符号所遵循的准则, 你可以参考这本书: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//smile.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448%3Fsa-no-redirect%3D1\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Grammar of Graphics&lt;/a&gt;.&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;不过不用担心, 仅仅是用圆圈和矩形你就已经可以写出无数具有创造力的作品了. 从简单的事情做起, 先在屏幕上展示一些东西, 再慢慢优化它.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;在Web展示上&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-1e7d7613b7e0789ccd3d2008d74e6c9a_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;2216\&quot; data-rawheight=\&quot;1056\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;2216\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-1e7d7613b7e0789ccd3d2008d74e6c9a_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.visualcinnamon.com/2016/04/svg-beyond-mere-shapes.html\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;SVG Beyond Mere Shapes&lt;/a&gt; 是对web标准的图形操作非常棒的展示&lt;/i&gt;&lt;/p&gt;&lt;p&gt;我们选择D3的原因之一是: 你可以非常方便的将你的作品分享给任何有浏览器的人. 这意味着你需要对于HTML5有一个基本的了解. 在你开始学习D3的API之前, 你应该已经掌握 SVG, HMTL 和 CSS的基本知识. 如果有时间的话, 你最好看看这篇讲Canvas的文章(如果你要展示的数据数据量非常大的话) &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.w3schools.com/html/html5_canvas.asp\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;learn some Canvas&lt;/a&gt; . 我推荐你也看看这篇, 它能帮你很好的将Canvas和D3结合使用 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.freecodecamp.com/d3-and-canvas-in-3-steps-8505c8b27444\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;this is a great intermediate tutorial&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;对于SVG, 我推荐看看这个简短有趣的介绍 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//alignedleft.com/tutorials/d3/an-svg-primer\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;SVG primer&lt;/a&gt; 来自 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//twitter.com/alignedleft\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Scott Murray&lt;/a&gt;. 使用工具: &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;BlockBuilder&lt;/a&gt; 来迅速开始你的coding而不用费时配置开发环境. 你也可以看看MDN对于SVG的官方文档 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/SVG\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;MDN reference site for SVG&lt;/a&gt;. 等你掌握了SVG的基础知识后, 你可以再看看这篇文章, 可以让你对SVG有一个更深的理解 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.visualcinnamon.com/2016/04/svg-beyond-mere-shapes.html\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;SVG beyond mere shapes&lt;/a&gt; 来自 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//visualcinnamon.com/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Nadieh Bremer&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-6143fe0ec76ceda7e2084d845ed8cdfc_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1070\&quot; data-rawheight=\&quot;740\&quot; data-thumbnail=\&quot;https://pic1.zhimg.com/v2-6143fe0ec76ceda7e2084d845ed8cdfc_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1070\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-6143fe0ec76ceda7e2084d845ed8cdfc_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;http://blockbuilder.org&lt;/a&gt; 让你可以快速上手玩转web图形标准!&lt;/i&gt;&lt;/p&gt;&lt;p&gt;其实你甚至可以不用使用 SVG来进行图形展示, 有时候直接用 &lt;code&gt;div&lt;/code&gt; 就足以让你做出想要的效果. 当然这要求你对 &lt;code&gt;CSS&lt;/code&gt; 有较好的掌握: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//css-tricks.com/almanac/properties/p/position/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;CSS positioning&lt;/a&gt; . 为了达到你想要的效果, 你甚至可以 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//bl.ocks.org/sxv/4491174\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;混用 HTML, SVG , Canvas&lt;/a&gt;!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;开始学习 d3.js&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-0048000205e778922e4efccf1a570474_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;2212\&quot; data-rawheight=\&quot;450\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;2212\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-0048000205e778922e4efccf1a570474_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//d3js.org/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3js.org&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;你可能见过D3的API文档, 展示着成堆的Function: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3/blob/master/API.md\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3’s API&lt;/a&gt;, 幸运的是, 现在D3已经拆分为了一个个的模块, 所以我们从中挑选一些特别常用的来进行介绍.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-scale&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-cf11d78d7eba187789826778c7357469_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1864\&quot; data-rawheight=\&quot;736\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1864\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-cf11d78d7eba187789826778c7357469_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/enjalot/f1ac6277c9b224ebf4daada75a06294d\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;colors&lt;/a&gt; 是对于scale非常常见的一种使用方式&lt;/i&gt;&lt;/p&gt;&lt;p&gt;scales是D3中非常基础的一个工具. 你可以从这里对它有一个大概的了解:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40mbostock/introducing-d3-scale-61980c51545f\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Introducing d3-scale&lt;/a&gt; 来自D3作者 Mike Bostock. 无论你做什么样的数据可视化, 你都非常有可能用到一种或多种scale.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-shape&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-df808312ee2b9cf55f9be9809095162c_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1914\&quot; data-rawheight=\&quot;806\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1914\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-df808312ee2b9cf55f9be9809095162c_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//bl.ocks.org/mbostock/582915\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;streamgraph&lt;/a&gt;,感谢 SVG paths!&lt;/i&gt;&lt;/p&gt;&lt;p&gt;SVG 的path非常冗杂 (&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//css-tricks.com/svg-path-syntax-illustrated-guide/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;see this thorough overview&lt;/a&gt;), 所以 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-shape%23d3-shape\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-shape&lt;/a&gt; 提供了一些让我们非常方便创建并操作SVG path的方法. 你可以看看 Mike 的 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40mbostock/introducing-d3-shape-73f8367e6d12\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Introducing d3-shape&lt;/a&gt; 来了解它的作用并着手开始使用它. d3-shape 还可以帮助你在Canvas中绘制各种各样的图形, 你仅仅添加一行代码就能将SVG的path添加到Canvas中!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-selection&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-bf6c58a9284672cecc16c645e69f85c4_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;760\&quot; data-rawheight=\&quot;320\&quot; data-thumbnail=\&quot;https://pic1.zhimg.com/v2-bf6c58a9284672cecc16c645e69f85c4_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;760\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-bf6c58a9284672cecc16c645e69f85c4_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;the &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/3808234\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;General Update Pattern&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;D3中最难以理解的部分可能就是它的selection了, 同样的, 看看D3作者的文章能让你对D3的selection模型有一个更好的理解:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/3808218\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;General Update Pattern&lt;/a&gt;. 我花了好几个月用脑袋锤桌子才最终理解了selection模型, 但是不要为此感到害怕! 你并不需要完完全全的掌握selection的所有api才能完成一份D3的作品. 当你做好了学习的准备, 你可以从这篇文章开始: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-selection%23d3-selection\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-selections&lt;/a&gt; README. 还有, 请一定看看这篇文章, 非常有助于理解selection模型 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bost.ocks.org/mike/join/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Thinking in Joins&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-collection&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-790a1b5c8564b8d098c84fd067fbb99e_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1904\&quot; data-rawheight=\&quot;974\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1904\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-790a1b5c8564b8d098c84fd067fbb99e_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;d3-nest 让你可以非常轻松的 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/9490313\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;将相似的数据归结在一起&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;操作数据是数据可视化中非常重要的步骤. 有时候这甚至是最困难的一部 (如果你的数据集不是很完美, 或者你对它没有很好的理解). 虽然有很多可以帮助进行数据处理的工具, 这里我还是推荐看看d3 collection  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-collection/blob/master/README.md%23d3-collection\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-collection&lt;/a&gt;,特别是这个模块:  &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-collection/blob/master/README.md%23nests\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;nest&lt;/a&gt; function.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-hierarchy&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-29db382a1653c671c83a134b08312beb_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1290\&quot; data-rawheight=\&quot;1292\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1290\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-29db382a1653c671c83a134b08312beb_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/8fe6fa6ed1fa976e5dd76cfa4d816fec\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Treemap&lt;/a&gt; 感谢  d3-hierarchy&lt;/i&gt;&lt;/p&gt;&lt;p&gt;接着上面对于 &lt;code&gt;数据操作&lt;/code&gt; 的讨论. 在很多数据可视化中, 按照数据的结构对其进行相应的展示是非常关键的一点. 你可以在这里找到很多工具Function, 它们能帮你很方便的进行这样的数据处理: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-hierarchy%23d3-hierarchy\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-hierarchy&lt;/a&gt; 绘制树状结构的数据.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-zoom&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-973b49ac8257f7129700b52ed299a35b_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;958\&quot; data-rawheight=\&quot;482\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-973b49ac8257f7129700b52ed299a35b_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;958\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-973b49ac8257f7129700b52ed299a35b_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/b783fbb2e673561d214e09c7fb5cedee\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;zooming is fun&lt;/a&gt;!&lt;/i&gt;&lt;/p&gt;&lt;p&gt;缩放是一种非常常见的数据可视化交互, D3的作者 Mike 给出了 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/search%23text%3Dzoom%3Buser%3Dmbostock%3Bd3version%3Dv4\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;一系列的例子&lt;/a&gt; 展示如何将缩放功能引入你的数据可视化作品中 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-zoom%23d3-zoom\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-zoom&lt;/a&gt;. 你也可以看看和 &lt;code&gt;缩放&lt;/code&gt; 非常类似的一种操作 &lt;code&gt;拖拽&lt;/code&gt; &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-drag%23d3-drag\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-drag&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-force&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-02ca245bbc97d5c1d583013660c322c5_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;640\&quot; data-rawheight=\&quot;531\&quot; data-thumbnail=\&quot;https://pic2.zhimg.com/v2-02ca245bbc97d5c1d583013660c322c5_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;640\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-02ca245bbc97d5c1d583013660c322c5_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/syntagmatic/75c5ca501200b0cf7a5958b4e404f777\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;sparse matrices&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;D3中非常让人们感到惊艳的功能之一是 &lt;code&gt;d3 force layout&lt;/code&gt;. 它非常容易上手使用, 但是很难真正掌握. 详细信息请参考: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-force%23d3-force\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-force&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;搜索!&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;最后一个tip: 你可以在这个网址对任何API Function搜索使用案例: &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//blockbuilder.org/search\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;BlockBuilder’s search&lt;/a&gt;.你甚至可以将你的搜索范围限定版本的d3上!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-a0a0c5f0c4532b27e83413313285ec49_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;984\&quot; data-rawheight=\&quot;428\&quot; data-thumbnail=\&quot;https://pic2.zhimg.com/v2-a0a0c5f0c4532b27e83413313285ec49_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;984\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-a0a0c5f0c4532b27e83413313285ec49_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;look at all those blocks!&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;D3社区&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-f8a53b74b54c7a0fae9403808afc2b3d_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1412\&quot; data-rawheight=\&quot;765\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1412\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-f8a53b74b54c7a0fae9403808afc2b3d_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//bl.ocks.org/micahstubbs/b35f2560f4205570b3328d1b40de0c6c\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Blockiverse&lt;/a&gt;&lt;/i&gt;&lt;/p&gt;&lt;p&gt;和志同道合的人们联系起来! 你可以加入我们的slack channel: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//d3-slackin.herokuapp.com/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3.js slack channel&lt;/a&gt;. 或者找到和你最近的D3线下活动: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.meetup.com/topics/d3-js/\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;https://www.&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;meetup.com/topics/d3-js&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;/&lt;/span&gt;&lt;span class=\&quot;ellipsis\&quot;&gt;&lt;/span&gt;&lt;/a&gt;). 如果你对D3非常狂热的话, 来参加SF每年秋天的聚会吧! &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//visfest.com/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;annual d3.unconf&lt;/a&gt;!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-200a3d892a637679fdc5239e93f27bbc_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;2550\&quot; data-rawheight=\&quot;3508\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;2550\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-200a3d892a637679fdc5239e93f27bbc_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;i&gt;我对于D3社区 和 D3学习过程中困难的理解&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;非常感谢 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/erikhazzard\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Erik Hazzard&lt;/a&gt; 帮助我编辑和润色这篇文章. 感谢 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/syntagmatic\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Kai Chang&lt;/a&gt; 对于文章提出的建议, 更加感谢你对于 d3 社区的帮助. 感谢slack channel #teaching-d3 in the &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//d3-slackin.herokuapp.com/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3js Slack&lt;/a&gt;, 特别是 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/dashingd3js\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Sebastian&lt;/a&gt; 和 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/JFSIII\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;John&lt;/a&gt; 的反馈. 当然了, 最最感谢D3的作者 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//twitter.com/mbostock\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Mike Bostock&lt;/a&gt; 创造了一个能让我们所有人玩耍的乐园 !&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;如果喜欢的话, 不妨关注一下 : )&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;github主页: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;ssthouse (Shen Shuntian)&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;知乎专栏: &lt;a href=\&quot;https://zhuanlan.zhihu.com/c_196857379\&quot; class=\&quot;internal\&quot;&gt;Data Visualization&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;掘金: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//juejin.im/user/57bc46c8efa631005a891573/posts\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;ssthouse 的个人主页 - 专栏 - 掘金&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&quot;,&quot;commentCount&quot;:3,&quot;excerptTitle&quot;:&quot;&quot;,&quot;imageUrl&quot;:&quot;https://pic4.zhimg.com/50/v2-5b8fa62cbde385bd35fe508ed27ddb0a_hd.jpg&quot;,&quot;type&quot;:&quot;article&quot;,&quot;id&quot;:38001672,&quot;voteupCount&quot;:32},&quot;38528158&quot;:{&quot;updated&quot;:1530010346,&quot;author&quot;:{&quot;avatarUrlTemplate&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_{size}.jpg&quot;,&quot;badge&quot;:[],&quot;name&quot;:&quot;ssthouse&quot;,&quot;eduMemberTag&quot;:{&quot;type&quot;:&quot;subject&quot;,&quot;memberTag&quot;:&quot;自动化&quot;},&quot;headline&quot;:&quot;maybe a software developer&quot;,&quot;gender&quot;:1,&quot;userType&quot;:&quot;people&quot;,&quot;isAdvertiser&quot;:false,&quot;avatarUrl&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg&quot;,&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/people/7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;type&quot;:&quot;people&quot;,&quot;urlToken&quot;:&quot;shenshuntain&quot;,&quot;id&quot;:&quot;7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;isOrg&quot;:false},&quot;created&quot;:1530010346,&quot;url&quot;:&quot;http://zhuanlan.zhihu.com/p/38528158&quot;,&quot;title&quot;:&quot;[译] D3.js 嵌套选择集 (Nested Selection)&quot;,&quot;excerpt&quot;:&quot;[译] D3.js 嵌套选择集 (Nested Selection) 译者注: 原文: Mike Bostock (D3.js 作者) -- &lt;a href=\&quot;https://bost.ocks.org/mike/nest/\&quot;&gt;Nested Selections&lt;/a&gt; 译者: &lt;a href=\&quot;https://github.com/ssthouse\&quot;&gt;ssthouse&lt;/a&gt; 本文讲解的是关于 D3.js 中 d3-selection 的使用. d3-selection 是 d3 的核心所在, 它提供了一种和以往 &lt;i&gt;Dom 操作&lt;/i&gt; 和 &lt;i&gt;数据操作&lt;/i&gt; 完…&quot;,&quot;content&quot;:&quot;&lt;h2&gt;[译] D3.js 嵌套选择集 (Nested Selection)&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;译者注:&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;原文: Mike Bostock (D3.js 作者) -- &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bost.ocks.org/mike/nest/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Nested Selections&lt;/a&gt;&lt;br&gt;译者: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;ssthouse&lt;/a&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;本文讲解的是关于 D3.js 中 d3-selection 的使用. d3-selection 是 d3 的核心所在, 它提供了一种和以往 &lt;i&gt;Dom 操作&lt;/i&gt; 和 &lt;i&gt;数据操作&lt;/i&gt; 完全不同的思路, 让我们能非常优雅的进行数据可视化工作.&lt;br&gt;本文是 d3 作者对于 d3-selection 中 &lt;i&gt;嵌套选择集&lt;/i&gt; 的讲解, 本人阅读后觉得很有启发, 所以翻译成中文, 希望对读者也能有所帮助.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;译文&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;D3 的 选择集是分层级的, 就像 Dom 元素和数据集是可以有层级的一样. 比如说 Table:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-html\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;table&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;thead&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  A&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  B&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  C&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  D&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;thead&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tbody&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  0&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  1&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  2&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  3&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  4&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  5&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  6&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  7&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  8&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;  9&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 10&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 11&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 12&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 13&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 14&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt; 15&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;tbody&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=\&quot;nt\&quot;&gt;table&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如果让你只选中 tbody 元素中的 td, 你会如何操作? 直接使用 &lt;code&gt;d3.selectAll(&#x27;td&#x27;)&lt;/code&gt; 显然会选中所有的 td 元素(包括 thead 和 tbody). 如果想只选中存在与 B 元素中的 A 元素, 你需要这样操作:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;除了上面那种方法, 你还可以先选中 tbody, 再选中 td 元素, 像这样:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;因为 selectAll 会对当前选择集中的每个元素(如: tbody)选中其符合条件的子元素(如: td). 这种方法会得到和 &lt;code&gt;d3.selectAll(&#x27;tbody td&#x27;)&lt;/code&gt; 相同的结果. 但如果你之后想要对同一父元素的选择集引申出更多的选择集的话 (比如区分选中 table 中的奇数行选择集和偶数行选择集), 这种嵌套选择集方式会方便的多.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;嵌套中索引的使用&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;接着上面的例子, 如果你使用 &lt;code&gt;d3.selectAll(&#x27;td&#x27;)&lt;/code&gt; , 你会得到一个平展的选择集, 像这样:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-e4f16513dc09960890dbced63c52f050_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;971\&quot; data-rawheight=\&quot;517\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;971\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-e4f16513dc09960890dbced63c52f050_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;平展的选择集缺少了层级结构: 不论是 thead 中的 td 还是 tbody 中的 td 全都被展开成了一个数组, 而不是以父元素进行分组. 这让我们想对每一行或是每一列的 td 进行操作变得很困难. 与此相反的, D3 的嵌套选择集能保存层级关系. 比如我们想以行的方式对选择集分组, 我们首先选中 tr 元素. 然后选中 td 元素.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-2ac89722aeebc4977c77dc24af7d10b2_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;689\&quot; data-rawheight=\&quot;508\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;689\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-2ac89722aeebc4977c77dc24af7d10b2_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;现在, 如果你想让第一列的所有元素变红, 你可以利用 index 参数 i:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;color&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;?&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;null&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;red&#x27;&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;上面的参数 i 是 td 元素在 tr 中的索引, 你还可以通过添加一个 j 参数来获得当前的行数的索引. 像这样:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;color&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;j&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;console&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;log&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;sb\&quot;&gt;`current row: &lt;/span&gt;&lt;span class=\&quot;si\&quot;&gt;${&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;j&lt;/span&gt;&lt;span class=\&quot;si\&quot;&gt;}&lt;/span&gt;&lt;span class=\&quot;sb\&quot;&gt;`&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;?&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;null&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;red&#x27;&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;嵌套和数据间的关联&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;层级结构的 Dom 元素常常是由层级结构的数据来驱动的. 而层级的选择集能更方便的处理数据绑定.&lt;br&gt;继续上面的例子, 你可以把 table 的数据表示为一个矩阵:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;],&lt;/span&gt; \n  &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;4&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;5&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;6&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;7&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;],&lt;/span&gt; \n  &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;8&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;9&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;11&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;],&lt;/span&gt; \n  &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;12&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;13&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;14&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;]&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;为了让这些数据绑定上对应的 td 元素, 我们首先将矩阵的每一行和 tr 绑定对应起来, 然后再将矩阵中一行的每一个元素和 tr 中的每一个 td 绑定起来:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// d is matrix[i]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;需要注意的是, &lt;code&gt;data()&lt;/code&gt; 不仅可以传入一个数据, 它还可以传入一个 &lt;i&gt;返回一个数组的 function&lt;/i&gt;. 平展的选择集通常对应的是单个数组, 是因为平展的选择集只有一个 group.&lt;/p&gt;&lt;p&gt;上面的 row 选择集是一个平展的选择集, 因为它是直接由 d3.selectAll 创建的:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-2580033035db927d31070787ec418e14_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;908\&quot; data-rawheight=\&quot;229\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;908\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-2580033035db927d31070787ec418e14_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tr&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;而 td 的选择集是嵌套的:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-ffbb07d9922f7dece57267ea7ae363d7_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;877\&quot; data-rawheight=\&quot;608\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;877\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-ffbb07d9922f7dece57267ea7ae363d7_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// matrix[i]&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;data 传入的 操作函数给每一个 group 绑定了一个数组数据. d3 会对每一行 tr 调用操作函数. 因为父元素数据是矩阵, 所以操作函数在每次被调用时只是简单的返回矩阵中当前行的数据, 来和 tr 进行绑定.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;嵌套中父节点作用&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;嵌套选择集有一个微妙但可能造成严重影响的副作用: 它会给每个 group 设置父节点. 父节点是选择集的一个隐藏属性, 它会在被调用 append 方法时使用, 将子元素添加到父节点的 Dom 元素当中. 比如: 如果你想通过下面的方式进行数据绑定操作, 你会得到一个 error:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-d66b754240510545291e6d48c09332eb_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;917\&quot; data-rawheight=\&quot;217\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;917\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-d66b754240510545291e6d48c09332eb_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;table tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// error!&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;上面的代码之所以会报错, 是因为默认的父节点是 html 元素, 你不能直接将 tr 元素添加到 html 元素中. 所以, 我们应该在进行数据绑定前, 先选择好父节点:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-171293172fb4a097a873581bbbe5522f_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;874\&quot; data-rawheight=\&quot;224\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;874\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-171293172fb4a097a873581bbbe5522f_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;table&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// success&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这种方式可以用来选择任意层级的嵌套选择集. 比如你想从头创建一个 table, 并填入上面矩阵中的数据, 你可以首选选中 body 元素:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-f118e7c2d0792143740cff3565882685_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;844\&quot; data-rawheight=\&quot;125\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;844\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-f118e7c2d0792143740cff3565882685_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;body&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;body&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;接下来在父节点 body 中添加一个 table:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-292f6fe95611e846e15747503dee2c31_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;772\&quot; data-rawheight=\&quot;133\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;772\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-292f6fe95611e846e15747503dee2c31_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;table&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;body&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;table&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;接下来绑定矩阵数据, 创建 tr 元素. 因为 selectAll 是在 table 元素上进行调用的, 所以父节点是 table:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-ad32b54cafeb40956811c590aff47c17_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;872\&quot; data-rawheight=\&quot;228\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;872\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-ad32b54cafeb40956811c590aff47c17_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tr&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;table&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;matrix&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;最后我们以 tr 作为父节点, 创建 td 元素:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-31e88d220c9380a5b48daa44e689d069_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;810\&quot; data-rawheight=\&quot;612\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;810\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-31e88d220c9380a5b48daa44e689d069_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tr&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;要不要使用嵌套选择集 ?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;在 D3 中, select 和 selectAll 有一个很重要的区别: select 会继续使用当前存在的 group, 而 selectAll 总是会创建新的 group. 因此调用 select 能保存原有 selection 的数据, 索引位置, 甚至父节点.&lt;/p&gt;&lt;p&gt;比如, 下面的平展的选择集, 它的父节点仍然是 html 节点:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-83c92e5a5051dce321af7ba371e967ae_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;866\&quot; data-rawheight=\&quot;220\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;866\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-83c92e5a5051dce321af7ba371e967ae_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;td&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tbody tr&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;td&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;想要得到嵌套的选择集, 唯一的方法就是在已有的选择集的基础上, 调用 selectAll 方法. 这就是为什么数据绑定总是出现在 selectAll 之后, 而不是 select 之后.&lt;/p&gt;&lt;p&gt;这篇文章使用 table 作为例子仅仅是为了方便讲解层级结构. 其实 table 的使用并不是特别具有典型性. 其实还有许多其它 嵌套选择集的例子(&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bost.ocks.org/mike/miserables/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;点我查看&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//bl.ocks.org/mbostock/882152\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;点我查看&lt;/a&gt;)&lt;/p&gt;&lt;p&gt;就像 &lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//juejin.im/post/5b20a5925188251371243c14\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;用 join 的方式思考&lt;/a&gt;&lt;/i&gt; 一样, 嵌套选择集同样使用了一种思想上完全不同的处理 &lt;i&gt;Dom 元素&lt;/i&gt; 和 &lt;i&gt;数据&lt;/i&gt; 的思路. 这种思路刚开始可能很难理解, 但你一旦掌握了, 你就能驾轻就熟的使用 D3.js 来完成你的数据可视化任务了.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;如果觉得不错的话, 不妨点下面的链接关注一下 : )&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;github 主页&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;https://zhuanlan.zhihu.com/c_196857379\&quot; class=\&quot;internal\&quot;&gt;知乎专栏&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//juejin.im/user/57bc46c8efa631005a891573/posts\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;掘金&lt;/a&gt;&lt;/p&gt;&quot;,&quot;commentCount&quot;:0,&quot;excerptTitle&quot;:&quot;&quot;,&quot;imageUrl&quot;:&quot;https://pic4.zhimg.com/50/v2-2ac89722aeebc4977c77dc24af7d10b2_hd.jpg&quot;,&quot;type&quot;:&quot;article&quot;,&quot;id&quot;:38528158,&quot;voteupCount&quot;:3},&quot;38846198&quot;:{&quot;updated&quot;:1530525599,&quot;author&quot;:{&quot;avatarUrlTemplate&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_{size}.jpg&quot;,&quot;badge&quot;:[],&quot;name&quot;:&quot;ssthouse&quot;,&quot;eduMemberTag&quot;:{&quot;type&quot;:&quot;subject&quot;,&quot;memberTag&quot;:&quot;自动化&quot;},&quot;headline&quot;:&quot;maybe a software developer&quot;,&quot;gender&quot;:1,&quot;userType&quot;:&quot;people&quot;,&quot;isAdvertiser&quot;:false,&quot;avatarUrl&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg&quot;,&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/people/7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;type&quot;:&quot;people&quot;,&quot;urlToken&quot;:&quot;shenshuntain&quot;,&quot;id&quot;:&quot;7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;isOrg&quot;:false},&quot;created&quot;:1530525599,&quot;url&quot;:&quot;http://zhuanlan.zhihu.com/p/38846198&quot;,&quot;title&quot;:&quot;[译] D3.js 之 d3-shap 简介&quot;,&quot;excerpt&quot;:&quot;译者注 原文: 来自 D3.js 作者 Mike Bostock 的 &lt;a href=\&quot;https://medium.com/@mbostock/introducing-d3-shape-73f8367e6d12\&quot;&gt;Introducing d3-shape&lt;/a&gt; 译者: &lt;a href=\&quot;https://github.com/ssthouse\&quot;&gt;ssthouse&lt;/a&gt; 联系译者: 邮箱(ssthouse@163.com) &amp;amp; 微信(wssst123456789) 译文 假设你现在想创建一个用于学习特定数据集的工具, 你最容易想到的呈现方式是什么呢? 一个可以自定义的 c…&quot;,&quot;content&quot;:&quot;&lt;h2&gt;译者注&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;blockquote&gt;原文: 来自 D3.js 作者 Mike Bostock 的 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40mbostock/introducing-d3-shape-73f8367e6d12\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;Introducing d3-shape&lt;/a&gt;&lt;br&gt;译者: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;ssthouse&lt;/a&gt;&lt;br&gt;联系译者: 邮箱(ssthouse@163.com) &amp;amp; 微信(wssst123456789)&lt;/blockquote&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;译文&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;假设你现在想创建一个用于学习特定数据集的工具, 你最容易想到的呈现方式是什么呢? 一个可以自定义的 chart? 一个抽象的坐标系统? 将数据编码成图像来表示?&lt;/p&gt;&lt;p&gt;每一种方法都有它的好处. 比如你想做探索性的数据可视化, 你可能会更偏向于快速(高效)的方法, 因为这样你可以快速的测试各种不同的可视化效果.&lt;br&gt;如果是做讲解性质的数据可视化, 你可能会选择能精细控制的方法, 以让你的观众能精准的理解你的意图.&lt;/p&gt;&lt;p&gt;不管你选择的哪种方法, 你最终都需要将实际的图形画在屏幕上, 也就是说你需要用你的数据生成一些能代表这些数据的图形.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;那么, 你打算如何画出图形呢?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;一些简单的图形, 比如柱状图, 通过 canvas 的 api 就可以轻松的画出: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//www.w3.org/TR/2dcontext/%23dom-context-2d-fillrect\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;fillRect&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-a9fb29d7e12b2dd51e3abd78ee8762cd_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;960\&quot; data-rawheight=\&quot;500\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;960\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-a9fb29d7e12b2dd51e3abd78ee8762cd_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如果要画出一些直线, 或者折线也不难, 使用 canvas 的 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.w3.org/TR/2dcontext/%23dom-context-2d-moveto\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;moveTo&lt;/a&gt; , &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.w3.org/TR/2dcontext/%23dom-context-2d-lineto\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;lineTo&lt;/a&gt; 方法即可:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-ea554ef10df5d7e9aab99dbb5a3ac389_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;888\&quot; data-rawheight=\&quot;240\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;888\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-ea554ef10df5d7e9aab99dbb5a3ac389_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;但若是想画出曲线图呢? 想要画出 &lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//www.cemyuksel.com/research/catmullrom_param/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;圆滑的曲线&lt;/a&gt; 似乎开始变得不那么容易了:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-0644dc9146cc677d971c7322bc3f1a7d_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;888\&quot; data-rawheight=\&quot;240\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;888\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-0644dc9146cc677d971c7322bc3f1a7d_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;我们再增加一点难度, 如果我们想要曲线圆滑的同时, 还要保持数据的&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//adsabs.harvard.edu/full/1990A%2526A...239..443S\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;单调性&lt;/a&gt;呢?&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-12b49e864064f9eb4f20a49b3fb4b32c_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;888\&quot; data-rawheight=\&quot;240\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;888\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-12b49e864064f9eb4f20a49b3fb4b32c_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;再者, 如果我们想画出扇形切片呢? 如果我们还想给扇形切片加上圆角, 加上切片之间的间距呢,&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-ebc3703441ff82f9d77a0b66d6da382e_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;500\&quot; data-rawheight=\&quot;500\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;500\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-ebc3703441ff82f9d77a0b66d6da382e_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;怎么样, 是不是觉得有些&lt;b&gt;挑战&lt;/b&gt;了呢?&lt;/p&gt;&lt;p&gt;这时候该 &lt;b&gt;d3-shape&lt;/b&gt; 出场了:&lt;br&gt;d3-shape 是一个用于绘制数据可视化中常见的几何图形的库. 它非常的小巧, 而且可以同时和 SVG 和 Canvas 协同工作.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-shape 有多小?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;大概 28kb, 压缩后仅仅 6kb. 它还包括了 &lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-path\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-path&lt;/a&gt;&lt;/i&gt; . 它总共代码仅仅 1500 行, 所以我非常推荐你看看它的&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-shape/tree/master/src\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;源代码&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;使用 d3-shape 你将得到什么呢?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;简单的说, 你将得到绘制 &lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-shape%23lines\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;线&lt;/a&gt;&lt;/i&gt; 和 &lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-shape%23areas\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;面&lt;/a&gt;&lt;/i&gt; 的能力. 包括: 各种各样的曲线, 派图, 扇形图, 散点图等等.&lt;/p&gt;&lt;p&gt;除此之外还有更多, &lt;i&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-hierarchy\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-hierarchy&lt;/a&gt;&lt;/i&gt; 模块包括了绘制包含层级结构数据的功能(比如树状图). 还有更多独立的模块能够帮助你绘制出更多定制化的图形: 比如 绘制地理位置的图像, 绘制模拟物理系统的网络图等等.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;d3-shape 的目的是什么呢?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;d3-shape 是一个让你进行数据可视化的工具. 它特别适合和已有的操作 DOM 的框架一同使用(意味着不需要 d3-selection), 比如 Angular, Vue, React. d3-js 中还有许多方便的模块, 配合着使用能更好的提升你的数据可视化效率, 比如: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-color\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-color&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-format\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-format&lt;/a&gt;, &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-time\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-time&lt;/a&gt; and &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/d3/d3-scale\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3-scale&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;想要贡献代码?&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;想要自己实现一个曲线生成的算法? 想要创建一种消除数据噪点的曲线? 查看源代码, 在 github 上提交 pull request. 或者查看编写 d3 插件的文章, 创建并发布你自己的 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//medium.com/%40mbostock/let-s-make-a-d3-plugin-c8e697599f48\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3 插件&lt;/a&gt; 模块.&lt;/p&gt;&lt;p&gt;祝你 d3-shape 使用愉快!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;想继续了解 D3.js&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这里是我的 &lt;i&gt;D3.js&lt;/i&gt; 、 &lt;i&gt;数据可视化&lt;/i&gt; 的github 地址, 欢迎 start &amp;amp; fork :tada:&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse/d3-blog\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;D3-blog&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;如果觉得不错的话, 不妨点击下面的链接关注一下 : )&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;github主页&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;https://zhuanlan.zhihu.com/c_196857379\&quot; class=\&quot;internal\&quot;&gt;知乎专栏&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//juejin.im/user/57bc46c8efa631005a891573/posts\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;掘金&lt;/a&gt;&lt;/p&gt;&quot;,&quot;commentCount&quot;:0,&quot;excerptTitle&quot;:&quot;&quot;,&quot;imageUrl&quot;:&quot;https://pic2.zhimg.com/50/v2-0644dc9146cc677d971c7322bc3f1a7d_hd.jpg&quot;,&quot;type&quot;:&quot;article&quot;,&quot;id&quot;:38846198,&quot;voteupCount&quot;:5},&quot;46241352&quot;:{&quot;updated&quot;:1539031130,&quot;author&quot;:{&quot;avatarUrlTemplate&quot;:&quot;https://pic4.zhimg.com/50/da8e974dc_{size}.jpg&quot;,&quot;badge&quot;:[{&quot;type&quot;:&quot;identity&quot;,&quot;description&quot;:&quot;注册会计师(CPA)持证人&quot;}],&quot;name&quot;:&quot;知乎用户&quot;,&quot;eduMemberTag&quot;:{&quot;type&quot;:&quot;subject&quot;,&quot;memberTag&quot;:&quot;投资&quot;},&quot;headline&quot;:&quot;&quot;,&quot;gender&quot;:1,&quot;userType&quot;:&quot;people&quot;,&quot;isAdvertiser&quot;:false,&quot;avatarUrl&quot;:&quot;https://pic4.zhimg.com/50/da8e974dc_is.jpg&quot;,&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/people/0&quot;,&quot;type&quot;:&quot;people&quot;,&quot;urlToken&quot;:&quot;&quot;,&quot;id&quot;:&quot;6fa7bf868a06876505d3a569960ff30a&quot;,&quot;isOrg&quot;:false},&quot;created&quot;:1539031130,&quot;url&quot;:&quot;http://zhuanlan.zhihu.com/p/46241352&quot;,&quot;title&quot;:&quot;D3.js - 数据绑定 &amp; 动画初步 1&quot;,&quot;excerpt&quot;:&quot;实例: 实现如下 类似电表的动态效果。 上代码。 &amp;lt;svg width=\&quot;600\&quot; height=\&quot;600\&quot;&amp;gt;&amp;lt;/svg&amp;gt;\n\n&amp;lt;script src=\&quot;https://d3js.org/d3.v5.min.js\&quot;&amp;gt;&amp;lt;/script&amp;gt;\n&amp;lt;script&amp;gt;\n\n let data = \&quot;0000000\&quot;.split(\&quot;\&quot;).map(_=&amp;gt;Number.parseInt(_));\n let flag = true;\n const dur = …&quot;,&quot;content&quot;:&quot;&lt;p&gt;实例: 实现如下 类似电表的动态效果。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-7497eadc9b4d18ba8216b143cb9044d3_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;179\&quot; data-rawheight=\&quot;130\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-7497eadc9b4d18ba8216b143cb9044d3_b.jpg\&quot; class=\&quot;content_image\&quot; width=\&quot;179\&quot;&gt;&lt;/figure&gt;&lt;p&gt;上代码。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;svg&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;600\&quot;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;height&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;600\&quot;&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;err\&quot;&gt;/svg&amp;gt;&lt;/span&gt;\n\n&lt;span class=\&quot;o\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;script&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;src&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;https://d3js.org/d3.v5.min.js\&quot;&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;err\&quot;&gt;/script&amp;gt;&lt;/span&gt;\n&lt;span class=\&quot;o\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;script&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;&amp;gt;&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;0000000\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;split&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;map&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=\&quot;nb\&quot;&gt;Number&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nb\&quot;&gt;parseInt&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;));&lt;/span&gt;\n    &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;flag&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;true&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n    &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;dur&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;5&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n    &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;svg\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;defs\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;clipPath\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;id\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;clip\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;rect\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;x\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;y\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;50&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;width\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;length&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;20&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;height\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;40&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;);&lt;/span&gt;\n\n    &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;svg\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;g\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;rect\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;rect\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;x\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;y\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;50&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;height\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;40&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;width\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;fill\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;none\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;stroke-width\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;2\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;stroke\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;black\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;groups&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;svg\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;g\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;clip-path\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;url(#clip)\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;g\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;g\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;cursor\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;pointer\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;upper&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;\t&lt;span class=\&quot;nx\&quot;&gt;groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;text\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;x\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;y\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;50&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;font-size\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;30px\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;font-family\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;Times New Roman\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;click\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;onclick&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n\n    &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;lower&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;\t&lt;span class=\&quot;nx\&quot;&gt;groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;text\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;x\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;15&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;y\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;80&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;font-size\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;30px\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;font-family\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;Times New Roman\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;click\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;onclick&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;onclick&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(){&lt;/span&gt;\n        &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;flag&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;){&lt;/span&gt;\n            &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;l&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;length&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n            &lt;span class=\&quot;k\&quot;&gt;for&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;l&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;++&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n                &lt;span class=\&quot;nx\&quot;&gt;repeat&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;);&lt;/span&gt;\n            &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n            &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;repeat&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n\n                &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;upper&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;][&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;]).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;increment&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;);&lt;/span&gt;\n                &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;lower&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;][&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;]).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transition&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;delay&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;dur&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;nb\&quot;&gt;Math&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;pow&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;l&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;increment&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;);&lt;/span&gt;\n\n                &lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;_groups&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;][&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;]).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transition&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;duration&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;dur&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;nb\&quot;&gt;Math&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;pow&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;l&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attrTween&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;transform\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(){&lt;/span&gt;\n                    &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;t&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;){&lt;/span&gt;\n                        &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;translate(\&quot;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;t&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;30&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;]&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s2\&quot;&gt;\&quot;)\&quot;&lt;/span&gt;\n                    &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n                &lt;span class=\&quot;p\&quot;&gt;}).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s2\&quot;&gt;\&quot;end\&quot;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;()=&amp;gt;{&lt;/span&gt;\n                    &lt;span class=\&quot;nx\&quot;&gt;repeat&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;);&lt;/span&gt;\n                &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n                &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n            &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n            &lt;span class=\&quot;nx\&quot;&gt;flag&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;false&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n    &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;increment&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(){&lt;/span&gt;\n        &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;a&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;  &lt;span class=\&quot;nb\&quot;&gt;Number&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nb\&quot;&gt;parseInt&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;())&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n\n        &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;a&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;===&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;9&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;?&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;a&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n&lt;span class=\&quot;o\&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=\&quot;err\&quot;&gt;/script&amp;gt;&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;首先考虑数据的映射关系，关于d3映射的理念，上一节已经进行了充分的阐述。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;前一位的变化速度为后一位的十分之一。&lt;/li&gt;&lt;li&gt;电表上的各位以&amp;lt;text&amp;gt;标签表示，数位变化速度对应&amp;lt;text&amp;gt;标签的移动速度&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;此时运用到一个小技巧，并不需要将0到9都存放起来。利用类似 蒙板 效果的 clipPath 即可实现，请看下图示例。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-38a91241929202c76060e5adb5caa5b3_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;179\&quot; data-rawheight=\&quot;130\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-38a91241929202c76060e5adb5caa5b3_b.jpg\&quot; class=\&quot;content_image\&quot; width=\&quot;179\&quot;&gt;&lt;/figure&gt;&lt;p&gt;将数字框之外的部分都遮蔽掉，即达成数字变化的动态效果。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;说一下代码实现。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=http%3A//d3.select\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;d3.select&lt;/a&gt;（） 类似 于 document.querySelector, 用途在于选定目标DOM对象，返回d3元素。&lt;/p&gt;&lt;p&gt;append() 增加子标签。&lt;/p&gt;&lt;p&gt;attr() 以及 style() 用于操作当前d3 元素，变更对应属性以及样式。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;d3.select(\&quot;svg\&quot;).append(\&quot;defs\&quot;).append(\&quot;clipPath\&quot;).attr(\&quot;id\&quot;,\&quot;clip\&quot;)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;对应的操作为 将 下列defs 标签 添加到 svg， 并返回clipPath对象&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;def&amp;gt;\n&amp;lt;clipPath id=\&quot;clip\&quot;&amp;gt;&amp;lt;/clipPath&amp;gt;\n&amp;lt;/def&amp;gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;通过浏览器中的 开发者选项 元素标签 可以查看对应DOM。&lt;/p&gt;&lt;p&gt;Chrome 的快捷键为 Ctrl+Shift+J&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-59f8d991ce1a408c9ac413740553f210_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;272\&quot; data-rawheight=\&quot;68\&quot; class=\&quot;content_image\&quot; width=\&quot;272\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;同理，在clipPath对象下增加rect对象 并设定其属性。&lt;/p&gt;&lt;p&gt;是为蒙板形状，在此之外的部分均屏蔽掉。&lt;/p&gt;&lt;p&gt;运用蒙板只需在目标元素上指定 对应蒙板样式的ID属性。&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;.style(\&quot;clip-path\&quot;,\&quot;url(#clip)\&quot;)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;  let groups = d3.select(\&quot;svg\&quot;).append(\&quot;g\&quot;)\n        .style(\&quot;clip-path\&quot;, \&quot;url(#clip)\&quot;)\n        .selectAll(\&quot;g\&quot;)\n        .data(data).enter()\n        .append(\&quot;g\&quot;)\n        .style(\&quot;cursor\&quot;, \&quot;pointer\&quot;)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-67e64b2450ce0bb1d317b3d2533b9c60_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;143\&quot; data-rawheight=\&quot;179\&quot; class=\&quot;content_image\&quot; width=\&quot;143\&quot;&gt;&lt;/figure&gt;&lt;p&gt;此步骤涉及到d3的数据绑定，即 将目标数据绑定到指定DOM上&lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-26ce9a51c1791a4dc8be3d301a1f00e5_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1021\&quot; data-rawheight=\&quot;219\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1021\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-26ce9a51c1791a4dc8be3d301a1f00e5_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;在开发者模式下我们可以看到，d3元素都有一个__&lt;i&gt;data&lt;/i&gt;__ 属性，通过增加该属性把数据与DOM对象联系起来。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;绑定的过程有一个固定的模式&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;.selectAll(\&quot;g\&quot;).data(data).enter().append(\&quot;g\&quot;)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;&lt;li&gt;选择尚未添加的待绑定的DOM，&lt;/li&gt;&lt;li&gt;通过data(data).enter()绑定数据，data应当为数组，其中元素对应相应的待绑定标签&lt;/li&gt;&lt;li&gt;.append 将DOM实例化。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;上例中，我们将 字符串分解为 int 数组, 同时我们将该数组绑定到 &amp;lt;g&amp;gt; 标签&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;  let upper =\tgroups.append(\&quot;text\&quot;).text(d =&amp;gt; d)\n        .attr( \&quot;x\&quot;, (_, i) =&amp;gt; i * 15 + 10)\n        .attr( \&quot;y\&quot;, 50)\n        .style(\&quot;font-size\&quot;, \&quot;30px\&quot;)\n        .style(\&quot;font-family\&quot;, \&quot;Times New Roman\&quot;)\n        .on(\&quot;click\&quot;, onclick)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;groups 为上一步骤当中 已经绑定过数据的 &amp;lt;g&amp;gt;标签，接下来我们要再增加两列0. 此时.append(\&quot;text\&quot;)直接增加相应元素。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;.text() 如果无参数返回 当前text值&lt;/p&gt;&lt;p&gt;带参数的情况下，可以为固定值或回调函数，回调函数签名为&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;function(d, i){}\n//其中d为当前DOM对应的数值，即__data__值， i 为对应的数组索引。\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;.text(d =&amp;gt; d)\n .attr( \&quot;x\&quot;, (_, i) =&amp;gt; i * 15 + 10)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;text内容设定为对应的数据此时为0&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;x 即 text 的 x 属性设定为&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt; i * 15 + 10\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;即第一个元素的横坐标为10，第二个元素为25，依次向右排列。&lt;/p&gt;&lt;p&gt;style里面的内容也可以单独放到CSS当中&lt;/p&gt;&lt;p&gt;on()为事件绑定&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;.on(\&quot;click\&quot;, onclick)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;单击时触发 onclick函数。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt; function onclick(){\n        if(flag){\n            let l = data.length - 1;  // 数组长度\n\n            for (let i = 0; i &amp;lt;= l; i++) {\n                repeat(i);  // 调用各组动画， i 为对应数组下标，最右为l\n            }\n\n            function repeat(k) {\n       \n                d3.select(upper._groups[0][k]).text(increment);    // 将上方一列的数值加1\n                d3.select(lower._groups[0][k]).transition().delay(dur * Math.pow(10, l - k)).text(increment);   // 位移动画完毕后将下方数值加1\n\n                d3.select(groups._groups[0][k]).transition().duration(dur * Math.pow(10, l - k)).attrTween(\&quot;transform\&quot;, function(){\n                    return function(t){\n                        return \&quot;translate(\&quot; + [0, t * 30] + \&quot;)\&quot;\n                    }\n                }).on(\&quot;end\&quot;, ()=&amp;gt;{\n                    repeat(k);  // 动画完成后再次调用 动画函数 达到累增。\n                })\n                ;\n            }\n\n            flag = false;\n        }\n    }\n\n    function increment(){\n        let a =  Number.parseInt(d3.select(this).text()) ;  \n\n        return a === 9 ? 0 : a + 1;    // 如果当前为9 则 转为0，否则加1\n    }\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;单击时，&lt;/p&gt;&lt;ol&gt;&lt;li&gt;各数位的数值会进行相应改变。&lt;/li&gt;&lt;li&gt;有相应的向下位移效果。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;js 中的动画效果都是通过连续改变DOM元素的属性值实现，具体原理留待以后。d3给我们提供了现成的解决方案。 &lt;/p&gt;&lt;p&gt;d3.transition() 后的属性为变更属性&lt;/p&gt;&lt;p&gt;.duration()设定动画持续时间&lt;/p&gt;&lt;p&gt;.delay()设定动画开始的延时&lt;/p&gt;&lt;p&gt;本例当中.attrTween(\&quot;transform\&quot;, 部分为通过变更 svg 当中元素的 &lt;/p&gt;&lt;p&gt;transform  属性 当中的 translate(x, y) 来进行位移。 x, y 为水平以及垂直的偏移量。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;改变速率通过设定动画持续时间来调整，动画持续时间越长，则位移越慢。具体而言，&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-text\&quot;&gt;&lt;span&gt;&lt;/span&gt;// dur 最右边数位的持续时间， l 为数组最右元素的下标， k 为当前元素下标\n// Math.pow 取幂\ndur * Math.pow(10, l - k)\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;后续我们还会对 动画 效果有专门的讨论。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;专栏开头有许多d3相关专有概念，哪怕是有JS基础的朋友们也可能需要慢慢适应。一但上手之后，就会真正体会到不受工具束缚的可视化的乐趣。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;可以尝试对于程序进行修改，在浏览器中看看相应的变化。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;有任何问题请在下方留言。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;本专栏所有文章著作权归属本人。未经本人书面许可，除知乎日报外，任何人不得转载。&lt;/p&gt;&quot;,&quot;commentCount&quot;:2,&quot;excerptTitle&quot;:&quot;&quot;,&quot;type&quot;:&quot;article&quot;,&quot;id&quot;:46241352,&quot;voteupCount&quot;:8},&quot;47013777&quot;:{&quot;updated&quot;:1539774875,&quot;author&quot;:{&quot;avatarUrlTemplate&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_{size}.jpg&quot;,&quot;badge&quot;:[],&quot;name&quot;:&quot;ssthouse&quot;,&quot;eduMemberTag&quot;:{&quot;type&quot;:&quot;subject&quot;,&quot;memberTag&quot;:&quot;自动化&quot;},&quot;headline&quot;:&quot;maybe a software developer&quot;,&quot;gender&quot;:1,&quot;userType&quot;:&quot;people&quot;,&quot;isAdvertiser&quot;:false,&quot;avatarUrl&quot;:&quot;https://pic4.zhimg.com/50/6bdb49d0ecb9c5664929fbfd21bdf7fa_is.jpg&quot;,&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/people/7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;type&quot;:&quot;people&quot;,&quot;urlToken&quot;:&quot;shenshuntain&quot;,&quot;id&quot;:&quot;7ee968f3f00324e34fdaedc4ea125e05&quot;,&quot;isOrg&quot;:false},&quot;created&quot;:1539774875,&quot;url&quot;:&quot;http://zhuanlan.zhihu.com/p/47013777&quot;,&quot;title&quot;:&quot;Github Repository 可视化 (D3.js &amp; Three.js)&quot;,&quot;excerpt&quot;:&quot;Github Repository 可视化 (D3.js &amp;amp; Three.js)先上 Demo 链接 &amp;amp; 效果图 &lt;a href=\&quot;https://ssthouse.github.io/github-visualization/\&quot;&gt;demo 链接&lt;/a&gt; &lt;a href=\&quot;https://github.com/ssthouse/github-visualization\&quot;&gt;github 链接&lt;/a&gt;效果图 2D: 效果图 3D: 为什么要做这样一个网站?最初想法是因为 github 提供的页面无法一次看到用户的所有 repository, 也无法直观的看到每个 repository 的量级…&quot;,&quot;content&quot;:&quot;&lt;h2&gt;Github Repository 可视化 (D3.js &amp;amp; Three.js)&lt;/h2&gt;&lt;p&gt;先上 Demo 链接 &amp;amp; 效果图 &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//ssthouse.github.io/github-visualization/\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;demo 链接&lt;/a&gt; &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse/github-visualization\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;github 链接&lt;/a&gt;&lt;/p&gt;&lt;p&gt;效果图 2D: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic1.zhimg.com/v2-639c8720d4cb2c0db53d81d50e76b244_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1309\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic1.zhimg.com/v2-639c8720d4cb2c0db53d81d50e76b244_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1309\&quot; data-original=\&quot;https://pic1.zhimg.com/v2-639c8720d4cb2c0db53d81d50e76b244_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;效果图 3D: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-99ee8324eebe99ba0f5191e300889b01_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;949\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic2.zhimg.com/v2-99ee8324eebe99ba0f5191e300889b01_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;949\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-99ee8324eebe99ba0f5191e300889b01_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;为什么要做这样一个网站?&lt;/h2&gt;&lt;p&gt;最初想法是因为 github 提供的页面无法一次看到用户的所有 repository, 也无法直观的看到每个 repository 的量级对比(如 &lt;b&gt;commit&lt;/b&gt; 数, &lt;b&gt;star&lt;/b&gt; 数),&lt;/p&gt;&lt;p&gt;所以希望做一个能直观展示用户所有 repository 的网站.&lt;/p&gt;&lt;h2&gt;实现的功能有哪些?&lt;/h2&gt;&lt;p&gt;用户 Github Repository 数据的&lt;b&gt;2D&lt;/b&gt;和&lt;b&gt;3D&lt;/b&gt;展示, 点击用户 github 关注用户的头像, 可以查看他人的 Github Repository 展示效果.&lt;/p&gt;&lt;p&gt;2D 和 3D 版本均支持:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;展示用户的 Repository 可视化效果&lt;/li&gt;&lt;li&gt;点击 &lt;i&gt;following people&lt;/i&gt; 的头像查看他人的 Repository 可视化效果&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;其中 2D 视图支持页面缩放和拖拽 &amp;amp;&amp;amp; 单个 Repository 的缩放和拖拽, 3D 视图仅支持页面的缩放和拖拽.&lt;/p&gt;&lt;h2&gt;用到了哪些技术?&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;数据来源为 Github 提供的 &lt;i&gt;GraphQL API.&lt;/i&gt;&lt;/li&gt;&lt;li&gt;2D 实现使用到了 &lt;i&gt;D3.js&lt;/i&gt;&lt;/li&gt;&lt;li&gt;3D 实现使用到了 &lt;i&gt;Three.js&lt;/i&gt;&lt;/li&gt;&lt;li&gt;页面搭建使用 &lt;i&gt;Vue.js&lt;/i&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;实现细节?&lt;/h2&gt;&lt;h2&gt;2D 实现&lt;/h2&gt;&lt;p&gt;2D 效果图中, 每一个 Repository 用一个圆形表示, 圆形的大小代表了 &lt;i&gt;commit 数目 || start 数目 || fork 数目&lt;/i&gt;.&lt;/p&gt;&lt;p&gt;布局使用的是 &lt;b&gt;d3-layout&lt;/b&gt; 中的 &lt;b&gt;forceLayout&lt;/b&gt;, 达到模拟物理碰撞的效果. 拖拽用到了 &lt;b&gt;d3-drag&lt;/b&gt; 模块, 大致逻辑为:&lt;/p&gt;&lt;p&gt;==&amp;gt; 检测鼠标拖拽事件&lt;/p&gt;&lt;p&gt;==&amp;gt; 更新 UI 元素坐标&lt;/p&gt;&lt;p&gt;==&amp;gt; 重新计算布局坐标&lt;/p&gt;&lt;p&gt;==&amp;gt; 更新 UI 来达到圆形可拖拽的效果.&lt;/p&gt;&lt;h2&gt;让我们来看看具体代码:&lt;/h2&gt;&lt;p&gt;2D 页面依赖 D3.js 的 force-layout 进行动态更新, 我们为 force-layout 添加了以下几种 &lt;b&gt;force&lt;/b&gt;(作用力):&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;.force(&#x27;charge&#x27;, this.$d3.forceManyBody())&lt;/code&gt; 添加节点之间的相互作用力&lt;/li&gt;&lt;li&gt;&lt;code&gt;.force(&#x27;collide&#x27;,radius)&lt;/code&gt; 添加物理碰撞, 半径设置为圆形的半径&lt;/li&gt;&lt;li&gt;&lt;code&gt;.force(&#x27;forceX&#x27;, this.$d3.forceX(this.width / 2).strength(0.05))&lt;/code&gt; 添加横坐标居中的作用力&lt;/li&gt;&lt;li&gt;&lt;code&gt;.force(&#x27;forceY&#x27;, this.$d3.forceY(this.height / 2).strength(0.05))&lt;/code&gt; 添加纵坐标居中的作用力&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;主要代码如下:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;simulation&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forceSimulation&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;filteredRepositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;force&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;charge&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forceManyBody&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;())&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;force&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n    &lt;span class=\&quot;s1\&quot;&gt;&#x27;collide&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forceCollide&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;radius&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;areaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;force&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;forceX&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forceX&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;strength&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mf\&quot;&gt;0.05&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;force&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;forceY&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forceY&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;height&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;strength&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mf\&quot;&gt;0.05&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;tick&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tick&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;最后一行 &lt;code&gt;.on(&#x27;tick&#x27;, tick)&lt;/code&gt; 为 force-layout simulation 的回调方法, 该方法会在物理引擎更新的每个周期被调用, 我们可以在这个回调方法中更新页面, 以达到动画效果.&lt;/p&gt;&lt;p&gt;我们在这个 &lt;code&gt;tick&lt;/code&gt; 回调中要完成的任务是: 刷新 &lt;b&gt;svg&lt;/b&gt; 中 &lt;b&gt;circle&lt;/b&gt; 和 &lt;b&gt;html&lt;/b&gt; 的&lt;b&gt;span&lt;/b&gt; 的坐标. 具体代码如下. 如果用过 D3.js 的同学应该很熟悉这段代码了, 就是使用 d3-selection 对 DOM 元素 &lt;code&gt;enter(), update(), exit()&lt;/code&gt; 三种状态进行的简单控制.&lt;/p&gt;&lt;p&gt;这里需要注意的一点是, 我们没有使用 &lt;b&gt;svg&lt;/b&gt; 的 &lt;b&gt;text&lt;/b&gt; 元素来实现文字而是使用了 &lt;b&gt;html&lt;/b&gt; 的 &lt;b&gt;span&lt;/b&gt;, 目的是更好的控制文字换行.&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;tick&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;curTransform&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;zoomTransform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;div&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;updateTextLocation&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;texts&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;div&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;span&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;filteredRepositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;texts&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;span&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;merge&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;texts&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;name&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;font-size&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;textScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;px&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n      &lt;span class=\&quot;s1\&quot;&gt;&#x27;left&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt;\n        &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n        &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;((&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;areaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;1.5&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;2.0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;curTransform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n        &lt;span class=\&quot;s1\&quot;&gt;&#x27;px&#x27;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n      &lt;span class=\&quot;s1\&quot;&gt;&#x27;top&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;textScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;2.0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;curTransform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;px&#x27;&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;width&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;areaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;*&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;1.5&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;px&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;texts&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;exit&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;remove&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;g&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;circle&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;filteredRepositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;circle&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;title&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;commit number: &#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;merge&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;cx&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;cy&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;r&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;areaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;opacity&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;alphaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;call&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enableDragFunc&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;())&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;exit&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;remove&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;完成以上的逻辑后, 就能看到 2D 初始加载数据时的效果了: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-a87ac621db9cfc6dfd19d8d88b5c30f7_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1116\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-a87ac621db9cfc6dfd19d8d88b5c30f7_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1116\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-a87ac621db9cfc6dfd19d8d88b5c30f7_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;但此时页面中的 圆圈 (circle)还不能响应鼠标拖拽事件, 让我们使用 d3-drag 加入鼠标拖拽功能. 代码非常简单, 使用 d3-drag 处理 &lt;code&gt;start, drag, end&lt;/code&gt; 三个鼠标事件的回调即可:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;start &amp;amp; drag&lt;/b&gt; ==&amp;gt; 将当前节点的 &lt;code&gt;fx, fy&lt;/code&gt; (即 forceX, forceY, 设置这两个值会让 force-layout 添加作用力将该节点移动到 &lt;code&gt;fx, fy&lt;/code&gt;)&lt;/li&gt;&lt;li&gt;&lt;b&gt;end&lt;/b&gt; ==&amp;gt; 拖拽事件结束, 清空选中节点的 &lt;code&gt;fx, fy&lt;/code&gt;,&lt;/li&gt;&lt;/ul&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enableDragFunc&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;\n      &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;updateTextLocation&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n        &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;div&lt;/span&gt;\n          &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;span&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;repositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;each&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n            &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n            &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;left&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n            &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;top&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n            &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;transform-origin&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;-&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27; -&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n      &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n      &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;drag&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;start&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n          &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;!&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;active&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;simulation&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;alphaTarget&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mf\&quot;&gt;0.3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;restart&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fx&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fy&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;drag&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fx&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fy&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;updateTextLocation&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;end&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n          &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;!&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;active&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;simulation&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;alphaTarget&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fx&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;null&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;fy&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;null&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;},&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;需要注意的是,我们在 drag 的回调方法中,调用了 &lt;code&gt;updateTextLocation()&lt;/code&gt;, 这是因为我们的 drag 事件将会被应用到 circle 上, 而 text 不会自动更新坐标, 所以需要我们去手动更新. 接下来,我们将 d3-drag 应用到 circle 上:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;g&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;circle&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;filteredRepositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;circle&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;append&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;title&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;commit number: &#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;merge&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;cx&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;cy&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;r&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;areaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;opacity&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;alphaScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;call&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enableDragFunc&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;())&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// add d3-drag function&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;repositoryCircles&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;exit&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;().&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;remove&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如此我们便实现了拖拽效果: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-e91c72a44cac9a654eaeadd52c77aa9d_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1116\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic2.zhimg.com/v2-e91c72a44cac9a654eaeadd52c77aa9d_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1116\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-e91c72a44cac9a654eaeadd52c77aa9d_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;最后让我们加上 2D 界面的缩放功能, 这里使用的是 &lt;b&gt;d3-zoom&lt;/b&gt;. 和 d3-drag 类似, 我们只用处理鼠标滚轮缩放的回调事件即可:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enableZoomFunc&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;zoomFunc&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;zoom&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scaleExtent&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;([&lt;/span&gt;&lt;span class=\&quot;mf\&quot;&gt;0.5&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;10&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;])&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;on&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;zoom&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;g&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;attr&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;transform&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;div&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;span&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;repositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;each&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n          &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;left&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;top&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;node&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;transform-origin&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27;-&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;s1\&quot;&gt;&#x27; -&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;div&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;span&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;repositoryList&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;style&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n          &lt;span class=\&quot;s1\&quot;&gt;&#x27;transform&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n          &lt;span class=\&quot;s1\&quot;&gt;&#x27;translate(&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;s1\&quot;&gt;&#x27;px,&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;s1\&quot;&gt;&#x27;px) scale(&#x27;&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;$d3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;event&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;transform&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;k&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt;\n            &lt;span class=\&quot;s1\&quot;&gt;&#x27;)&#x27;&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;g&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;call&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;zoomFunc&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;同样的, 因为 span 不是 svg 元素, 我们需要手动更新缩放和坐标. 这样我们便实现了鼠标滚轮的缩放功能. &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-55c9b8806b0129294277d5480d6642af_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1116\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-55c9b8806b0129294277d5480d6642af_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1116\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-55c9b8806b0129294277d5480d6642af_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;以上便是 2D 效果实现的主要逻辑.&lt;/p&gt;&lt;h2&gt;3D 实现&lt;/h2&gt;&lt;p&gt;3D 效果图中的布局使用的是 d3-layout 中的 pack layout, 3D 场景中的拖拽合缩放直接使用了插件 &lt;b&gt;three-orbit-controls&lt;/b&gt;.&lt;/p&gt;&lt;h2&gt;让我们来看看具体代码&lt;/h2&gt;&lt;h2&gt;创建基本 3D 场景&lt;/h2&gt;&lt;p&gt;3D 视图中, 承载所有 UI 组件的是 Three.js 中的 Scene,首先我们初始化 &lt;b&gt;Scene&lt;/b&gt;.&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scene&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;Scene&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;接下来我们需要一个 &lt;b&gt;Render&lt;/b&gt;(渲染器)来将 Scene 中的画面渲染到 Web 页面上:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;renderer&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;WebGLRenderer&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;({&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;alpha&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;true&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;antialias&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;kc\&quot;&gt;true&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;renderer&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;setClearColor&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mh\&quot;&gt;0xeeeeee&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;0.3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;contaienrElement&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nb\&quot;&gt;document&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;getElementById&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;containerId&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;contaienrElement&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;appendChild&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;renderer&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;domElement&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后我们需要加入 &lt;b&gt;Light&lt;/b&gt;, 对 Three.js 了解过的同学应该很容易理解, 我们需要 Light 来照亮场景中的物体, 否则我们看到就是一片漆黑.&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;c1\&quot;&gt;// add light&lt;/span&gt;\n&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;light&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;AmbientLight&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mh\&quot;&gt;0x404040&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;c1\&quot;&gt;// soft white light&lt;/span&gt;\n&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scene&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;add&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;light&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;spotLight&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;DirectionalLight&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mh\&quot;&gt;0xffffff&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;0.7&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;spotLight&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;position&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;set&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;200&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;spotLight&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;lookAt&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scene&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;add&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;spotLight&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;最后我们需要加入 &lt;b&gt;Camera&lt;/b&gt;. 我们最终看到的 Scene 的样子就是从 Camera 的角度看到的样子. 我们使用 render 来将 Scene 从 Camera 看到的样子渲染出来:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;renderer&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;render&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scene&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;camera&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是这样子我们只是渲染了一次页面, 当 Scene 中的物体发生变化时, Web 页面上的 Canvas 并不会自动更新, 所以我们使用 &lt;code&gt;requestAnimationFrame&lt;/code&gt; 这个 api 来实时刷新 Canvas.&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;animate_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;animate_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;())&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;controls&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;update&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;renderer&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;render&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;scene&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;camera&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;实现布局&lt;/h2&gt;&lt;p&gt;为了实现和 2D 视图中类似的布局效果, 我们使用了 D3 的 pack-layout, 其效果是实现嵌套式的圆形布局效果. 类似下图: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic3.zhimg.com/v2-d2d1fb8f8bc2d523cbd64310bf475e0a_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;461\&quot; data-rawheight=\&quot;298\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;461\&quot; data-original=\&quot;https://pic3.zhimg.com/v2-d2d1fb8f8bc2d523cbd64310bf475e0a_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;这里我们只是想使用这个布局, 但是我们本身的数据不是嵌套式的, 所以我们手动将其包装一层, 使其变为嵌套的数据格式:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;s2\&quot;&gt;\&quot;children\&quot;&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;reporitoryList&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后我们调用 D3 的&lt;b&gt;pack-layout&lt;/b&gt;:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;calcluate3DLayout_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;pack&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;D3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;pack&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;size&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;([&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;layoutSize&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;layoutSize&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;])&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;padding&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;mi\&quot;&gt;5&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;rootData&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;D3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;hierarchy&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;({&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;children&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;reporitoryList&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;}).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;sum&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;nb\&quot;&gt;Math&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;pow&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;count&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;pack&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;rootData&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;leaves&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这样, 我们就完成了布局. 在控制台从查看 &lt;code&gt;this.data&lt;/code&gt;, 我们就能看到每个节点的 &lt;code&gt;x, y&lt;/code&gt;属性.&lt;/p&gt;&lt;h2&gt;创建表示 Repository 的球体&lt;/h2&gt;&lt;p&gt;这里我们使用 &lt;b&gt;THREE.SphereGeometry&lt;/b&gt; 来创建球体, 球体的材质我们使用 &lt;b&gt;new THREE.MeshNormalMaterial()&lt;/b&gt;. 这种材质的效果是, 我们从任何角度来看球体, 其四周颜色都是不变的.如图: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic2.zhimg.com/v2-1253022d6201255151774c57339f7b55_b.jpg\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;1008\&quot; data-rawheight=\&quot;503\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1008\&quot; data-original=\&quot;https://pic2.zhimg.com/v2-1253022d6201255151774c57339f7b55_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;addBallsToScene_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;!&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;virtualElement&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;virtualElement&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nb\&quot;&gt;document&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;createElement&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;svg&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;ballMaterial&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;MeshNormalMaterial&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;circles&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;D3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;virtualElement&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;selectAll&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;circle&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;data&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;circles&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;enter&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;merge&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;circles&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;each&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;function&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;d&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;datum&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;D3&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;select&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;datum&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;ballGroup&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;add&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n        &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;generateBallMesh_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;indexScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;datum&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;),&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;indexScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;datum&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;y&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;),&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;self&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;volumeScale&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;datum&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;r&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;),&lt;/span&gt;\n          &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;\n        &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n      &lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n&lt;span class=\&quot;nx\&quot;&gt;generateBallMesh_&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;yIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;radius&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;name&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;geometry&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;SphereGeometry&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;radius&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;32&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;32&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;kd\&quot;&gt;var&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;sphere&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;Mesh&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;geometry&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;ballMaterial&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;sphere&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;position&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;set&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;yIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;sphere&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;需要注意的是, 这里我们把所有的球体放置在 ballGroup 中, 并把 ballGroup 放置到 Scene 中, 这样便于管理所有的球体(比如清空所有球体).&lt;/p&gt;&lt;h2&gt;创建表示 Repository 名称的 文字物体&lt;/h2&gt;&lt;p&gt;在一开始开发时, 我直接为每一个 Repository 的文字创建一个 &lt;b&gt;TextGeometry&lt;/b&gt;, 结果 3D 视图加载非常缓慢. 后来经过四处搜索,终于在 Three.js 的 一个 github issue 里面的找到了比较好的解决方案: 将 26 个英文字母分别创建 &lt;b&gt;TextGeometry&lt;/b&gt;, 然后在创建每一个单词时, 使用现有的 26 个字母的 TextGeometry 拼接出单词, 这样就可以大幅节省创建 TextGeometry 的时间. 讨论该 issue 的链接如下:&lt;/p&gt;&lt;blockquote&gt; github issue: &lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/mrdoob/three.js/issues/1825\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;&lt;span class=\&quot;invisible\&quot;&gt;https://&lt;/span&gt;&lt;span class=\&quot;visible\&quot;&gt;github.com/mrdoob/three&lt;/span&gt;&lt;span class=\&quot;invisible\&quot;&gt;.js/issues/1825&lt;/span&gt;&lt;span class=\&quot;ellipsis\&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt; &lt;/blockquote&gt;&lt;p&gt;示例代码如下:&lt;/p&gt;&lt;div class=\&quot;highlight\&quot;&gt;&lt;pre&gt;&lt;code class=\&quot;language-js\&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=\&quot;c1\&quot;&gt;// 事先将26个字母创建好 TextGeometry&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;loadAlphabetGeoMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;fontSize&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;2.4&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charGeoMap&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;Map&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charWidthMap&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;Map&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt;\n    &lt;span class=\&quot;s1\&quot;&gt;&#x27;1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-./?&#x27;&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;split&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;).&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forEach&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;textGeo&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;TextGeometry&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;font&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;font&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;size&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;fontSize&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;height&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;:&lt;/span&gt; &lt;span class=\&quot;mf\&quot;&gt;0.04&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;textGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;computeBoundingBox&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n    &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;textGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;boundingBox&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;max&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;textGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;boundingBox&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;min&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;x&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charGeoMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;set&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;textGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charWidthMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;set&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;width&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;console&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;log&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charGeoMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n\n&lt;span class=\&quot;c1\&quot;&gt;// 创建整个单词时直接使用现有字母的 TextGeometry进行拼接&lt;/span&gt;\n&lt;span class=\&quot;nx\&quot;&gt;addTextWithCharGroup&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;yIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;radius&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;group&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;Group&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;()&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;text&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;split&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;s1\&quot;&gt;&#x27;&#x27;&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n\n  &lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;totalLen&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;\n  &lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;forEach&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;!&lt;/span&gt;&lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charWidthMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;get&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;))&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;totalLen&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;1&lt;/span&gt;\n      &lt;span class=\&quot;k\&quot;&gt;return&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;totalLen&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charWidthMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;get&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kr\&quot;&gt;char&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;})&lt;/span&gt;\n  &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;offset&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;totalLen&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;/&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;\n\n  &lt;span class=\&quot;k\&quot;&gt;for&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;kd\&quot;&gt;let&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;0&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;length&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;;&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;++&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n    &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;curCharGeo&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charGeoMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;get&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;])&lt;/span&gt;\n    &lt;span class=\&quot;k\&quot;&gt;if&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;o\&quot;&gt;!&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;curCharGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt; &lt;span class=\&quot;p\&quot;&gt;{&lt;/span&gt;\n      &lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+=&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;\n      &lt;span class=\&quot;k\&quot;&gt;continue&lt;/span&gt;\n    &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n    &lt;span class=\&quot;kr\&quot;&gt;const&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;curMesh&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;new&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;THREE&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;Mesh&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;curCharGeo&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;textMaterial&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;curMesh&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;position&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;set&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;-&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;offset&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;yIndex&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;,&lt;/span&gt; &lt;span class=\&quot;nx\&quot;&gt;radius&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+&lt;/span&gt; &lt;span class=\&quot;mi\&quot;&gt;2&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;group&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;add&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;curMesh&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n    &lt;span class=\&quot;nx\&quot;&gt;xIndex&lt;/span&gt; &lt;span class=\&quot;o\&quot;&gt;+=&lt;/span&gt; &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;charWidthMap&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;get&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;chars&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;[&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;i&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;])&lt;/span&gt;\n  &lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n  &lt;span class=\&quot;k\&quot;&gt;this&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;textGroup&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;.&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;add&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;(&lt;/span&gt;&lt;span class=\&quot;nx\&quot;&gt;group&lt;/span&gt;&lt;span class=\&quot;p\&quot;&gt;)&lt;/span&gt;\n&lt;span class=\&quot;p\&quot;&gt;}&lt;/span&gt;\n&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;需要注意的是该方法仅适用于英文, 如果是汉字的话, 我们是无法事先创建所有汉字的 TextGeometry 的, 这方面我暂时也还没找到合适的解决方案.&lt;/p&gt;&lt;p&gt;如上, 我们便完成了 3D 视图的搭建, 效果如图: &lt;/p&gt;&lt;figure&gt;&lt;img src=\&quot;https://pic4.zhimg.com/v2-63cf70d84ed92a5d610ee35cb1d2d153_b.gif\&quot; data-caption=\&quot;\&quot; data-size=\&quot;normal\&quot; data-rawwidth=\&quot;950\&quot; data-rawheight=\&quot;836\&quot; data-thumbnail=\&quot;https://pic4.zhimg.com/v2-63cf70d84ed92a5d610ee35cb1d2d153_b.jpg\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;950\&quot; data-original=\&quot;https://pic4.zhimg.com/v2-63cf70d84ed92a5d610ee35cb1d2d153_r.jpg\&quot;&gt;&lt;/figure&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;h2&gt;想了解更多 D3.js 和 数据可视化 ?&lt;/h2&gt;&lt;p&gt;这里是我的 &lt;i&gt;D3.js&lt;/i&gt; 、 &lt;i&gt;数据可视化&lt;/i&gt; 的 github 地址, 欢迎 star &amp;amp; fork :tada:&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse/d3-blog\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;D3-blog&lt;/a&gt;&lt;/p&gt;&lt;h2&gt;如果觉得本文不错的话, 不妨点击下面的链接关注一下 : )&lt;/h2&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//github.com/ssthouse\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;github 主页&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;https://zhuanlan.zhihu.com/c_196857379\&quot; class=\&quot;internal\&quot;&gt;知乎专栏&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=\&quot;http://link.zhihu.com/?target=https%3A//juejin.im/user/57bc46c8efa631005a891573/posts\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;&gt;掘金&lt;/a&gt;&lt;/p&gt;&quot;,&quot;commentCount&quot;:0,&quot;excerptTitle&quot;:&quot;&quot;,&quot;imageUrl&quot;:&quot;https://pic1.zhimg.com/50/v2-a35a7ec371969f92588d5cde75a9a2ff_hd.jpg&quot;,&quot;type&quot;:&quot;article&quot;,&quot;id&quot;:47013777,&quot;voteupCount&quot;:7}},&quot;columns&quot;:{},&quot;topics&quot;:{&quot;20034667&quot;:{&quot;unansweredCount&quot;:57,&quot;bestAnswerersCount&quot;:2,&quot;isBlack&quot;:false,&quot;relationship&quot;:{&quot;isEditable&quot;:false},&quot;isIndexVisible&quot;:false,&quot;excerpt&quot;:&quot;Data-Driven Documents&quot;,&quot;isVote&quot;:false,&quot;isIndexEditable&quot;:false,&quot;isFollowing&quot;:false,&quot;id&quot;:&quot;20034667&quot;,&quot;questionsCount&quot;:57,&quot;name&quot;:&quot;D3.js&quot;,&quot;introduction&quot;:&quot;Data-Driven Documents&quot;,&quot;fatherCount&quot;:2,&quot;headerCard&quot;:{&quot;subtitle&quot;:&quot;&quot;,&quot;title&quot;:&quot;D3.js&quot;,&quot;description1&quot;:&quot;Data-Driven Documents&quot;,&quot;actions&quot;:[{&quot;type&quot;:&quot;follow&quot;,&quot;name&quot;:&quot;关注&quot;}],&quot;subtype&quot;:&quot;topic&quot;,&quot;avatarUrl&quot;:&quot;https://pic1.zhimg.com/50/fae00cab34e38bad9a23c1ef6c8ab469_qhd.jpg&quot;,&quot;description2&quot;:&quot;&quot;,&quot;scores&quot;:[],&quot;config&quot;:{&quot;tabs&quot;:[{&quot;url&quot;:&quot;https://www.zhihu.com/appview/topic/20034667/intro&quot;,&quot;fakeUrl&quot;:&quot;topic_details/topic_20034667&quot;,&quot;type&quot;:&quot;intro&quot;,&quot;name&quot;:&quot;简介&quot;},{&quot;fakeUrl&quot;:&quot;topic_feed/topic_20034667&quot;,&quot;type&quot;:&quot;discussion&quot;,&quot;name&quot;:&quot;讨论&quot;},{&quot;fakeUrl&quot;:&quot;topic_top_answers/topic_20034667&quot;,&quot;type&quot;:&quot;essence&quot;,&quot;name&quot;:&quot;精华&quot;}],&quot;defaultTabType&quot;:&quot;discussion&quot;,&quot;metaTemplateType&quot;:0,&quot;avatarType&quot;:1}},&quot;url&quot;:&quot;http://www.zhihu.com/api/v4/topics/20034667&quot;,&quot;followersCount&quot;:1562,&quot;avatarUrl&quot;:&quot;https://pic1.zhimg.com/50/fae00cab34e38bad9a23c1ef6c8ab469_qhd.jpg&quot;,&quot;bestAnswersCount&quot;:29,&quot;type&quot;:&quot;topic&quot;}},&quot;roundtables&quot;:{},&quot;favlists&quot;:{},&quot;comments&quot;:{},&quot;notifications&quot;:{},&quot;ebooks&quot;:{},&quot;activities&quot;:{},&quot;feeds&quot;:{},&quot;pins&quot;:{},&quot;promotions&quot;:{},&quot;drafts&quot;:{}},&quot;currentUser&quot;:&quot;&quot;,&quot;account&quot;:{&quot;lockLevel&quot;:{},&quot;unlockTicketStatus&quot;:false,&quot;unlockTicket&quot;:null,&quot;challenge&quot;:[],&quot;errorStatus&quot;:false,&quot;message&quot;:&quot;&quot;,&quot;isFetching&quot;:false,&quot;accountInfo&quot;:{},&quot;urlToken&quot;:{&quot;loading&quot;:false}},&quot;settings&quot;:{&quot;socialBind&quot;:null,&quot;inboxMsg&quot;:null,&quot;notification&quot;:{},&quot;email&quot;:{},&quot;privacyFlag&quot;:null,&quot;blockedUsers&quot;:{&quot;isFetching&quot;:false,&quot;paging&quot;:{&quot;pageNo&quot;:1,&quot;pageSize&quot;:6},&quot;data&quot;:[]},&quot;blockedFollowees&quot;:{&quot;isFetching&quot;:false,&quot;paging&quot;:{&quot;pageNo&quot;:1,&quot;pageSize&quot;:6},&quot;data&quot;:[]},&quot;ignoredTopics&quot;:{&quot;isFetching&quot;:false,&quot;paging&quot;:{&quot;pageNo&quot;:1,&quot;pageSize&quot;:6},&quot;data&quot;:[]},&quot;restrictedTopics&quot;:null,&quot;laboratory&quot;:{}},&quot;notification&quot;:{},&quot;people&quot;:{&quot;profileStatus&quot;:{},&quot;activitiesByUser&quot;:{},&quot;answersByUser&quot;:{},&quot;answersSortByVotesByUser&quot;:{},&quot;answersIncludedByUser&quot;:{},&quot;votedAnswersByUser&quot;:{},&quot;thankedAnswersByUser&quot;:{},&quot;voteAnswersByUser&quot;:{},&quot;thankAnswersByUser&quot;:{},&quot;topicAnswersByUser&quot;:{},&quot;articlesByUser&quot;:{},&quot;articlesSortByVotesByUser&quot;:{},&quot;articlesIncludedByUser&quot;:{},&quot;pinsByUser&quot;:{},&quot;questionsByUser&quot;:{},&quot;commercialQuestionsByUser&quot;:{},&quot;favlistsByUser&quot;:{},&quot;followingByUser&quot;:{},&quot;followersByUser&quot;:{},&quot;mutualsByUser&quot;:{},&quot;followingColumnsByUser&quot;:{},&quot;followingQuestionsByUser&quot;:{},&quot;followingFavlistsByUser&quot;:{},&quot;followingTopicsByUser&quot;:{},&quot;publicationsByUser&quot;:{},&quot;columnsByUser&quot;:{},&quot;allFavlistsByUser&quot;:{},&quot;brands&quot;:null},&quot;env&quot;:{&quot;ab&quot;:{&quot;config&quot;:{&quot;experiments&quot;:[{&quot;expId&quot;:&quot;launch-ad_ios_lans-2&quot;,&quot;expPrefix&quot;:&quot;ad_ios_lans&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:true,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_adr_dkts-9&quot;,&quot;expPrefix&quot;:&quot;gw_adr_dkts&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_adr_mini-2&quot;,&quot;expPrefix&quot;:&quot;gw_adr_mini&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_adr_wbtp-2&quot;,&quot;expPrefix&quot;:&quot;gw_adr_wbtp&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_adr_wxfb-2&quot;,&quot;expPrefix&quot;:&quot;gw_adr_wxfb&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_anr_wxbk-2&quot;,&quot;expPrefix&quot;:&quot;gw_anr_wxbk&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_ios_dkts-8&quot;,&quot;expPrefix&quot;:&quot;gw_ios_dkts&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_ios_mini-2&quot;,&quot;expPrefix&quot;:&quot;gw_ios_mini&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_ios_wxb-2&quot;,&quot;expPrefix&quot;:&quot;gw_ios_wxb&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_ios_wxfb-1&quot;,&quot;expPrefix&quot;:&quot;gw_ios_wxfb&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-gw_wbtp-2&quot;,&quot;expPrefix&quot;:&quot;gw_wbtp&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-mp_amap_ios-1&quot;,&quot;expPrefix&quot;:&quot;mp_amap_ios&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-mp_apm-1&quot;,&quot;expPrefix&quot;:&quot;mp_apm&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-mp_hb_si-3&quot;,&quot;expPrefix&quot;:&quot;mp_hb_si&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-mp_ios_webp-2&quot;,&quot;expPrefix&quot;:&quot;mp_ios_webp&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-mp_video_feed-2&quot;,&quot;expPrefix&quot;:&quot;mp_video_feed&quot;,&quot;isDynamicallyUpdated&quot;:false,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-se_ios_topsearch-2&quot;,&quot;expPrefix&quot;:&quot;se_ios_topsearch&quot;,&quot;isDynamicallyUpdated&quot;:false,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-top_dtmt-10&quot;,&quot;expPrefix&quot;:&quot;top_dtmt&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-top_feed_card-1&quot;,&quot;expPrefix&quot;:&quot;top_feed_card&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-vd_adrupload_cdn-2&quot;,&quot;expPrefix&quot;:&quot;vd_adrupload_cdn&quot;,&quot;isDynamicallyUpdated&quot;:false,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;launch-vd_upload_cdn-2&quot;,&quot;expPrefix&quot;:&quot;vd_upload_cdn&quot;,&quot;isDynamicallyUpdated&quot;:false,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;top_quality-1&quot;,&quot;expPrefix&quot;:&quot;top_quality&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;top_v_album-2&quot;,&quot;expPrefix&quot;:&quot;top_v_album&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;top_adpar-1&quot;,&quot;expPrefix&quot;:&quot;top_adpar&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false},{&quot;expId&quot;:&quot;top_ftc-5&quot;,&quot;expPrefix&quot;:&quot;top_ftc&quot;,&quot;isDynamicallyUpdated&quot;:true,&quot;isRuntime&quot;:false,&quot;includeTriggerInfo&quot;:false}],&quot;params&quot;:[{&quot;id&quot;:&quot;adr_edit_question&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_ad_cta&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_consultation&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_merger&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_ps&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_newfollow&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;se_correct_ab&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_feedre_rtt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;41&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_tb_long&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;51&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_more_hyb_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_live_btn_color&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;default_color&quot;},{&quot;id&quot;:&quot;se_tf&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_promo&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_notif_new_invite&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;},{&quot;id&quot;:&quot;top_30&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_nuc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_video_fix_position&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_article_new_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_cta&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_q_bar&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;NO&quot;},{&quot;id&quot;:&quot;web_card_style&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;b&quot;},{&quot;id&quot;:&quot;top_topic_feedre&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;21&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;tp_discussion_feed_card_type&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_nucc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_sj&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;2&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;hb_liguangyi_test&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_le_nav&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_question_invite_v2&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_vid_qt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_asp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;},{&quot;id&quot;:&quot;ios_q_bar&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;NO&quot;},{&quot;id&quot;:&quot;top_ntr&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_ques_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;tp_sft&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;a&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;tp_write_pin_guide&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_apm&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_mini&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;adr_traffic_leak&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;ios_dkts&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;20&quot;},{&quot;id&quot;:&quot;top_billread&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_column_auto_invite&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_mbv&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_traffic_threshold&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;314572800&quot;},{&quot;id&quot;:&quot;ios_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_major_onebox&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;major&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_tffrt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_book_is_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_invite_ans&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;A&quot;},{&quot;id&quot;:&quot;top_alt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_root_web&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_follow_user&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;91&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_vd_op&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_ff_cardtype&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;A&quot;},{&quot;id&quot;:&quot;ios_lssq&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_ps&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_question_new_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_android_launch_ad_mp4&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;open&quot;},{&quot;id&quot;:&quot;hb_best_answerer&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_report&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_root_mg&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_yhgc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_grow_guide_login_4&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;id&quot;:&quot;ios_wxbk&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;se_dt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_adpar&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_comment_new_editor&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_root_ac&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_vds_alb_pos&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_pre_load_html&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_profile_medal&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_spec_promo&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_tr&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_editor_version&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;V2&quot;},{&quot;id&quot;:&quot;ios_medal_badge_view&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;ls_new_video&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_distinction&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_yc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_dkts&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;200&quot;},{&quot;id&quot;:&quot;adr_question_invite_v2&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_psn&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;},{&quot;id&quot;:&quot;se_wiki_box&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_more_editcard&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;id&quot;:&quot;top_newfollowans&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_vd_score_new&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_logoc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;blue&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_prt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_wxfb&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_consulting_price&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;np&quot;},{&quot;id&quot;:&quot;hb_unfollow_reason&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_stream_render&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_entity&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;on&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_ad_slot&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_keywordab&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_real_time_launch_http&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;http_off&quot;},{&quot;id&quot;:&quot;ios_adr_vid_vol&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_hybrid_editor_v3&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_daxuechuisou&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;old&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_wxbk&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_answer_preload&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_lans&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;close&quot;},{&quot;id&quot;:&quot;top_multi_model&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_gr_auto_model&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_stream_render&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_profile_label&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_amap&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;y&quot;},{&quot;id&quot;:&quot;ios_answer_hybrid_preload&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_wbtp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_manual_tag&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_universalebook&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_anr_watch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_topsearch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;2&quot;},{&quot;id&quot;:&quot;se_consulting_switch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_f_r_nb&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_wbtp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_recall_tb_short&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;61&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;se_minor_onebox&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;d&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_is_gr&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_nszt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_tmt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_bugly&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;},{&quot;id&quot;:&quot;adr_local_server_enable&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_use_gd&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;},{&quot;id&quot;:&quot;ios_searchbox&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_user_gift&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_book_is_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_no_weighing&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_an&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_ebook&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;zr_ans_rec&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;gbrank&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_new_answer_pager&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_test_delete&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_magitab&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_q_a_c&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_tagore&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_new_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_invite&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_medal&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_wxfb&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_gif&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_article_new_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_ge4&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;3&quot;},{&quot;id&quot;:&quot;ios_video_upload_cdn&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_vdio_rew&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_feedre_cpt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;101&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_keyword&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_comment&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;ios_ios_launch_mp4&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_video_feed&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_billab&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_sqtc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_article_recommend_column&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_slot_ad_pos&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_video_rew&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_root&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_perm&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_recommend_column&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_quality&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_android_gdt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;open&quot;},{&quot;id&quot;:&quot;top_follow_question_hybrid&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_gr_topic_reweight&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;hb_major_onebox&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_video_agent_4_22&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;top_dtmt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;2&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_root_few_topic&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_unfollow_reason&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_hqt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_deep_user&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_video_score&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_ad_web_cache&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_new_market_search&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_roundtable&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_vid_home&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_gi&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_consult&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_rlp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_bill&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_login_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_memberfree&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_consultation&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_spic&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_qtoc&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_feedtopiccard&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_member_switch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_video_upload_cdn&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_km_center&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_topsearch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_hca&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_tb_follow&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;71&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_unif&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;},{&quot;id&quot;:&quot;ios_hybrid_intercepting&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_pfq&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_heifetz_column_api2&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_gr_model&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_nad&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_tb&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_uit&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_recommend_column&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_video_topic_volume_control&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_db_n_e&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_followtop&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_android_medal_badge_view&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_ans_video&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;N&quot;},{&quot;id&quot;:&quot;adr_mqtt_5_24_0&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_auto_syn&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recall_core_interest&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;81&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_anp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;android_answer_pager_off&quot;},{&quot;id&quot;:&quot;ios_1752&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;pin_efs&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;orig&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;se_consulting_price&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_test_4_liguangyi&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_liguangi_test&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;ios_real_time_launch_http&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;http_off&quot;},{&quot;id&quot;:&quot;top_hweb&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_sjre&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_video_continuous&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_x_z_c0&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;top_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;-1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;se_relevant_query&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;old&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_feedre&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_fqa&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_new_user_gift&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_mqtt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_new_roundtable&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;adr_pdf&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;},{&quot;id&quot;:&quot;ios_spic&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_mlssq&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;se_rescore&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;hb_billboard&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_rank&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_raf&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_tag_isolation&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_videos_priority&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;-1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_traffic_monitor&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;ios_next_ans&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;N&quot;},{&quot;id&quot;:&quot;ios_pdf&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;n&quot;},{&quot;id&quot;:&quot;top_nid&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_launch_timeout&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;-1&quot;},{&quot;id&quot;:&quot;se_ingress&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;off&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_billvideo&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_v_album&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_mini&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;adr_sdk_data_switch&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_7324&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_cashier_color&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_billboard_count&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_billupdate1&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;2&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_feedre_itemcf&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;31&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;web_ask_flow&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;exp_a&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_new_hybrid&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_task_statistics&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;false&quot;},{&quot;id&quot;:&quot;ios_profile_sig&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;id&quot;:&quot;ios_roundtable&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;A&quot;},{&quot;id&quot;:&quot;top_cc_at&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_use_cashier&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;new&quot;},{&quot;id&quot;:&quot;ios_ad_skip_pos&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;up&quot;},{&quot;id&quot;:&quot;ios_pay_view&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;new&quot;},{&quot;id&quot;:&quot;ls_play_continuous_order&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;2&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_profile_badge&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;true&quot;},{&quot;id&quot;:&quot;ios_webp&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;},{&quot;id&quot;:&quot;se_refactored_search_index&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_mlt_model&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_android_video_continuous&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_feed_video_continuous&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_next_answer_btn&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;hb_active_answerer&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;web_question_invite&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;N&quot;},{&quot;id&quot;:&quot;top_follow_reason&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_free_content&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;-1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_retag&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_retagg&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;ios_input_image&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;ios_quill_editor&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;pin_ef&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;orig&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_billpic&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_guest_login&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;top_nmt&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_recommend_topic_card&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;tp_ios_topic_write_pin_guide&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;adr_cashier_color&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;0&quot;},{&quot;id&quot;:&quot;adr_launch_ad_new_strategy&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;open&quot;},{&quot;id&quot;:&quot;se_gemini_service&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;content&quot;,&quot;chainId&quot;:&quot;_all_&quot;},{&quot;id&quot;:&quot;top_lowup&quot;,&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:&quot;1&quot;,&quot;chainId&quot;:&quot;_all_&quot;}],&quot;chains&quot;:[{&quot;chainId&quot;:&quot;_all_&quot;}]},&quot;triggers&quot;:{}},&quot;userAgent&quot;:{&quot;Edge&quot;:false,&quot;Wechat&quot;:false,&quot;Weibo&quot;:false,&quot;QQ&quot;:false,&quot;Mobile&quot;:false,&quot;Android&quot;:false,&quot;iOS&quot;:false,&quot;isAppleDevice&quot;:false,&quot;Zhihu&quot;:false,&quot;ZhihuHybrid&quot;:false,&quot;isBot&quot;:false,&quot;Tablet&quot;:false,&quot;UC&quot;:false,&quot;Sogou&quot;:false,&quot;Qihoo&quot;:false,&quot;Baidu&quot;:false,&quot;isWebView&quot;:false,&quot;origin&quot;:&quot;Custom User Agent&quot;},&quot;trafficSource&quot;:&quot;production&quot;,&quot;edition&quot;:{&quot;baidu&quot;:false,&quot;sogou&quot;:false,&quot;baiduBeijing&quot;:false,&quot;yidianzixun&quot;:false},&quot;theme&quot;:&quot;light&quot;,&quot;referer&quot;:&quot;&quot;,&quot;conf&quot;:{},&quot;ipInfo&quot;:{},&quot;logged&quot;:false,&quot;tdkInfo&quot;:{}},&quot;me&quot;:{&quot;accountInfoLoadStatus&quot;:{},&quot;organizationProfileStatus&quot;:{},&quot;columnContributions&quot;:[]},&quot;comments&quot;:{&quot;stickers&quot;:[],&quot;commentWithPicPermission&quot;:{},&quot;notificationsComments&quot;:{},&quot;pagination&quot;:{},&quot;collapsed&quot;:{},&quot;reverse&quot;:{},&quot;reviewing&quot;:{},&quot;conversation&quot;:{},&quot;conversationMore&quot;:{},&quot;parent&quot;:{}},&quot;pushNotifications&quot;:{&quot;default&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;ids&quot;:[]},&quot;follow&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;ids&quot;:[]},&quot;vote_thank&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;ids&quot;:[]},&quot;currentTab&quot;:&quot;default&quot;,&quot;notificationsCount&quot;:{&quot;default&quot;:0,&quot;follow&quot;:0,&quot;vote_thank&quot;:0}},&quot;messages&quot;:{&quot;data&quot;:{},&quot;currentTab&quot;:&quot;common&quot;,&quot;messageCount&quot;:0},&quot;register&quot;:{&quot;registerValidateSucceeded&quot;:null,&quot;registerValidateErrors&quot;:{},&quot;registerConfirmError&quot;:null,&quot;sendDigitsError&quot;:null,&quot;registerConfirmSucceeded&quot;:null},&quot;login&quot;:{&quot;loginUnregisteredError&quot;:false,&quot;loginBindWechatError&quot;:false,&quot;loginConfirmError&quot;:null,&quot;sendDigitsError&quot;:null,&quot;validateDigitsError&quot;:false,&quot;loginConfirmSucceeded&quot;:null,&quot;qrcodeLoginToken&quot;:&quot;&quot;,&quot;qrcodeLoginScanStatus&quot;:0,&quot;qrcodeLoginError&quot;:null,&quot;qrcodeLoginReturnNewToken&quot;:false},&quot;active&quot;:{&quot;sendDigitsError&quot;:null,&quot;activeConfirmSucceeded&quot;:null,&quot;activeConfirmError&quot;:null},&quot;switches&quot;:{},&quot;captcha&quot;:{&quot;captchaNeeded&quot;:false,&quot;captchaValidated&quot;:false,&quot;captchaBase64String&quot;:null,&quot;captchaValidationMessage&quot;:null,&quot;loginCaptchaExpires&quot;:false},&quot;sms&quot;:{&quot;supportedCountries&quot;:[]},&quot;coupon&quot;:{&quot;isRedeemingCoupon&quot;:false},&quot;question&quot;:{&quot;followers&quot;:{},&quot;concernedFollowers&quot;:{},&quot;answers&quot;:{},&quot;hiddenAnswers&quot;:{},&quot;createdAnswers&quot;:{},&quot;collapsedAnswers&quot;:{},&quot;notificationAnswers&quot;:{},&quot;invitationCandidates&quot;:{},&quot;inviters&quot;:{},&quot;invitees&quot;:{},&quot;similarQuestions&quot;:{},&quot;relatedCommodities&quot;:{},&quot;recommendReadings&quot;:{},&quot;bio&quot;:{},&quot;brand&quot;:{},&quot;permission&quot;:{},&quot;advancedStyle&quot;:{},&quot;commonAnswerCount&quot;:0,&quot;hiddenAnswerCount&quot;:0,&quot;meta&quot;:{},&quot;autoInvitation&quot;:{},&quot;simpleConcernedFollowers&quot;:{}},&quot;shareTexts&quot;:{},&quot;answers&quot;:{&quot;voters&quot;:{},&quot;copyrightApplicants&quot;:{},&quot;favlists&quot;:{},&quot;newAnswer&quot;:{},&quot;concernedUpvoters&quot;:{},&quot;simpleConcernedUpvoters&quot;:{}},&quot;banner&quot;:{},&quot;topic&quot;:{&quot;bios&quot;:{},&quot;hot&quot;:{&quot;20034667&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;items&quot;:[{&quot;attachedInfo&quot;:&quot;CjwQBxoHOTUwOTUyOCCbs5zeBSgHMABAAFIRdG9wX2FjdGl2aXR5X3Bvc3RaBjEzMDMzNnIINDcwMTM3Nzc=&quot;,&quot;type&quot;:&quot;topic_feed&quot;,&quot;target&quot;:{&quot;id&quot;:47013777,&quot;schema&quot;:&quot;article&quot;},&quot;targetDescription&quot;:&quot;&quot;},{&quot;attachedInfo&quot;:&quot;CjsQBxoHOTMzODAwMCDagO/dBSgIMAJAAFIRdG9wX2FjdGl2aXR5X3Bvc3RaBTgxNzcxcgg0NjI0MTM1Mg==&quot;,&quot;type&quot;:&quot;topic_feed&quot;,&quot;target&quot;:{&quot;id&quot;:46241352,&quot;schema&quot;:&quot;article&quot;},&quot;targetDescription&quot;:&quot;&quot;},{&quot;attachedInfo&quot;:&quot;CjwQBxoHNzY5NDM1NSCf7+fZBSgFMABAAFIRdG9wX2FjdGl2aXR5X3Bvc3RaBjEzMDMzNnIIMzg4NDYxOTg=&quot;,&quot;type&quot;:&quot;topic_feed&quot;,&quot;target&quot;:{&quot;id&quot;:38846198,&quot;schema&quot;:&quot;article&quot;},&quot;targetDescription&quot;:&quot;&quot;},{&quot;attachedInfo&quot;:&quot;CjwQBxoHNzYwMzExOCDqtcjZBSgDMABAAFIRdG9wX2FjdGl2aXR5X3Bvc3RaBjEzMDMzNnIIMzg1MjgxNTg=&quot;,&quot;type&quot;:&quot;topic_feed&quot;,&quot;target&quot;:{&quot;id&quot;:38528158,&quot;schema&quot;:&quot;article&quot;},&quot;targetDescription&quot;:&quot;&quot;},{&quot;attachedInfo&quot;:&quot;CjQQBxoHNzM5MjA5NCC0o/7YBSggMANAAFIRdG9wX2FjdGl2aXR5X3Bvc3RyCDM4MDAxNjcy&quot;,&quot;type&quot;:&quot;topic_feed&quot;,&quot;target&quot;:{&quot;id&quot;:38001672,&quot;schema&quot;:&quot;article&quot;},&quot;targetDescription&quot;:&quot;&quot;}],&quot;next&quot;:&quot;http://www.zhihu.com/api/v4/topics/20034667/feeds/top_activity?include=data%5B%3F%28target.type%3Dtopic_sticky_module%29%5D.target.data%5B%3F%28target.type%3Danswer%29%5D.target.content%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%3Bdata%5B%3F%28target.type%3Dtopic_sticky_module%29%5D.target.data%5B%3F%28target.type%3Danswer%29%5D.target.is_normal%2Ccomment_count%2Cvoteup_count%2Ccontent%2Crelevant_info%2Cexcerpt.author.badge%5B%3F%28type%3Dbest_answerer%29%5D.topics%3Bdata%5B%3F%28target.type%3Dtopic_sticky_module%29%5D.target.data%5B%3F%28target.type%3Darticle%29%5D.target.content%2Cvoteup_count%2Ccomment_count%2Cvoting%2Cauthor.badge%5B%3F%28type%3Dbest_answerer%29%5D.topics%3Bdata%5B%3F%28target.type%3Dtopic_sticky_module%29%5D.target.data%5B%3F%28target.type%3Dpeople%29%5D.target.answer_count%2Carticles_count%2Cgender%2Cfollower_count%2Cis_followed%2Cis_following%2Cbadge%5B%3F%28type%3Dbest_answerer%29%5D.topics%3Bdata%5B%3F%28target.type%3Danswer%29%5D.target.annotation_detail%2Ccontent%2Crelationship.is_authorized%2Cis_author%2Cvoting%2Cis_thanked%2Cis_nothelp%3Bdata%5B%3F%28target.type%3Danswer%29%5D.target.author.badge%5B%3F%28type%3Dbest_answerer%29%5D.topics%3Bdata%5B%3F%28target.type%3Darticle%29%5D.target.annotation_detail%2Ccontent%2Cauthor.badge%5B%3F%28type%3Dbest_answerer%29%5D.topics%3Bdata%5B%3F%28target.type%3Dquestion%29%5D.target.annotation_detail%2Ccomment_count&amp;limit=5&amp;after_id=4664.25210&quot;}},&quot;newest&quot;:{},&quot;top&quot;:{},&quot;unanswered&quot;:{},&quot;questions&quot;:{},&quot;followers&quot;:{},&quot;contributors&quot;:{},&quot;parent&quot;:{},&quot;children&quot;:{},&quot;bestAnswerers&quot;:{},&quot;wikiMeta&quot;:{},&quot;index&quot;:{},&quot;intro&quot;:{},&quot;meta&quot;:{},&quot;schema&quot;:{}},&quot;explore&quot;:{&quot;recommendations&quot;:{}},&quot;articles&quot;:{&quot;voters&quot;:{}},&quot;favlists&quot;:{&quot;relations&quot;:{}},&quot;pins&quot;:{&quot;voters&quot;:{}},&quot;topstory&quot;:{&quot;topstorys&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;afterId&quot;:0,&quot;items&quot;:[],&quot;next&quot;:null},&quot;recommend&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;afterId&quot;:0,&quot;items&quot;:[],&quot;next&quot;:null},&quot;follow&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;afterId&quot;:0,&quot;items&quot;:[],&quot;next&quot;:null},&quot;followWonderful&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;afterId&quot;:0,&quot;items&quot;:[],&quot;next&quot;:null},&quot;sidebar&quot;:null,&quot;announcement&quot;:{},&quot;hotList&quot;:[],&quot;guestFeeds&quot;:{&quot;isFetching&quot;:false,&quot;isDrained&quot;:false,&quot;afterId&quot;:0,&quot;items&quot;:[],&quot;next&quot;:null},&quot;followExtra&quot;:{&quot;isNewUser&quot;:null,&quot;isFetched&quot;:false,&quot;followCount&quot;:0,&quot;followers&quot;:[]}},&quot;upload&quot;:{},&quot;video&quot;:{&quot;data&quot;:{}},&quot;guide&quot;:{&quot;guide&quot;:{&quot;isFetching&quot;:false,&quot;isShowGuide&quot;:false}},&quot;reward&quot;:{&quot;answer&quot;:{},&quot;article&quot;:{},&quot;question&quot;:{}},&quot;search&quot;:{&quot;recommendSearch&quot;:[],&quot;topSearch&quot;:{},&quot;attachedInfo&quot;:{},&quot;nextOffset&quot;:{},&quot;generalByQuery&quot;:{},&quot;generalByQueryInADay&quot;:{},&quot;generalByQueryInAWeek&quot;:{},&quot;generalByQueryInThreeMonths&quot;:{},&quot;peopleByQuery&quot;:{},&quot;topicByQuery&quot;:{},&quot;columnByQuery&quot;:{},&quot;liveByQuery&quot;:{},&quot;albumByQuery&quot;:{},&quot;eBookByQuery&quot;:{}},&quot;creator&quot;:{&quot;tools&quot;:{&quot;question&quot;:{&quot;invitationCount&quot;:{&quot;questionFolloweeCount&quot;:0,&quot;questionTotalCount&quot;:0},&quot;goodatTopics&quot;:[]},&quot;customPromotion&quot;:{&quot;itemLists&quot;:{}}},&quot;explore&quot;:{&quot;academy&quot;:{&quot;tabs&quot;:[],&quot;article&quot;:{}}},&quot;rights&quot;:[],&quot;rightsStatus&quot;:{},&quot;levelUpperLimit&quot;:10,&quot;account&quot;:{&quot;growthLevel&quot;:{}}},&quot;publicEditPermission&quot;:{}}" data-config="false" data-useragent="{&quot;os&quot;:{},&quot;browser&quot;:{}}"></div><script src="https://static.zhihu.com/heifetz/vendor.7c9abc3e398528f8abf1.js"></script><script src="https://static.zhihu.com/heifetz/main.raven.20ecf75e0f2667f5d28a.js" defer=""></script><script src="https://static.zhihu.com/heifetz/main.app.88963c0c1a59d5eb2ece.js"></script><script src="https://static.zhihu.com/heifetz/main.topic-routes.57d09b43a330c820802f.js"></script></body></html>